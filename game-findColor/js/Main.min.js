function Main(){var _this=this;base(_this,LSprite,[]);_this.init();_this.scoreLayer=new Score();_this.scoreLayer.x=30;_this.scoreLayer.y=40;_this.addChild(_this.scoreLayer);_this.timeLayer=new Time();_this.timeLayer.x=230;_this.timeLayer.y=40;_this.addChild(_this.timeLayer);};var m={init:function(json){var _this=this;_this.gridAllLayer=new LSprite();_this.addChild(_this.gridAllLayer);_this.loopFn()},loopFn:function(){var _this=this,i=0,l=oData.oGame.n*oData.oGame.n,color=Tool.randomColor(),r=Tool.rand(3,l-1);for(i=0;i<l;i++){if(i==r){_this.addFn(i,color,true)}else{_this.addFn(i,color)}}},addFn:function(i,color,bAlpha){var _this=this,iGridGap=oData.oGame.s-oData.oGame.n,iGridL=(LGlobal.width-oData.oGame.w-iGridGap*(oData.oGame.n-1))*0.5;_this.gridLayer=new LSprite();_this.gridLayer.graphics.drawRect(0,"",[0,0,oData.oGame.w/ oData.oGame.n, oData.oGame.h /oData.oGame.n],true,color);_this.gridLayer.x=iGridL+Tool.oMath.floor(i/oData.oGame.n)*(oData.oGame.w/oData.oGame.n+iGridGap);_this.gridLayer.y=oData.oGame.t+i%oData.oGame.n*(oData.oGame.h/oData.oGame.n+iGridGap);_this.gridAllLayer.addChild(_this.gridLayer);if(bAlpha){_this.gridLayer.alpha=Tool.rand(4,9)*0.1;_this.gridLayer.addEventListener(LMouseEvent.MOUSE_DOWN,$.proxy(_this.downFn,_this))}},downFn:function(){var _this=this;if(!oData.bIsStart){return}_this.scoreLayer.childList[0].text="得分："+ ++oData.score;if(oData.oGame.n<9){oData.oGame.n++}_this.gridAllLayer.removeAllChild();_this.loopFn();oData.bStartTime=true}};for(var k in m)Main.prototype[k]=m[k];