var OS_PC="pc",OS_IPHONE="iPhone",OS_IPOD="iPod",OS_IPAD="iPad",OS_ANDROID="Android",OS_WINDOWS_PHONE="Windows Phone",OS_BLACK_BERRY="BlackBerry",NONE="none",UNDEFINED="undefined",LANDSCAPE="landscape",PORTRAIT="portrait",mouseX,mouseY;function LEvent(a){this.eventType=a;this._ll_preventDefault=!1}LEvent.prototype.preventDefault=function(){this._ll_preventDefault=!0};LEvent.INIT="init";LEvent.COMPLETE="complete";LEvent.ENTER_FRAME="enter_frame";LEvent.WINDOW_RESIZE="resize";
LEvent.SOUND_COMPLETE="sound_complete";LEvent.END_CONTACT="endContact";LEvent.PRE_SOLVE="preSolve";LEvent.POST_SOLVE="postSolve";LEvent.BEGIN_CONTACT="beginContact";LEvent.addEventListener=function(a,d,b,c){null==c&&(c=!1);a.addEventListener?a.addEventListener(d,b,c):a.attachEvent&&(a["e"+d+b]=b,a[d+b]=function(){a["e"+d+b]()},a.attachEvent("on"+d,a[d+b]))};
LEvent.removeEventListener=function(a,d,b,c){null==c&&(c=!1);a.removeEventListener?a.removeEventListener(d,b,c):a.detachEvent&&(a["e"+d+b]=b,a[d+b]=function(){a["e"+d+b]()},a.detachEvent("on"+d,a[d+b]))};var LMouseEvent=function(){throw"LMouseEvent cannot be instantiated";};LMouseEvent.MOUSE_DOWN="mousedown";LMouseEvent.MOUSE_UP="mouseup";LMouseEvent.TOUCH_START="touchstart";LMouseEvent.TOUCH_MOVE="touchmove";LMouseEvent.TOUCH_END="touchend";LMouseEvent.MOUSE_MOVE="mousemove";
LMouseEvent.MOUSE_OVER="mouseover";LMouseEvent.MOUSE_OUT="mouseout";LMouseEvent.DOUBLE_CLICK="dblclick";var LMultitouchInputMode=function(){throw"LMultitouchInputMode cannot be instantiated";};LMultitouchInputMode.NONE="none";LMultitouchInputMode.GESTURE="gesture";LMultitouchInputMode.TOUCH_POINT="touchPoint";var LMultitouch=function(){throw"LMultitouch cannot be instantiated";};LMultitouch.inputMode="none";LMultitouch.touchs=[];var LTextEvent=function(){throw"LTextEvent cannot be instantiated";};
LTextEvent.TEXT_INPUT="textInput";LTextEvent.WIND_COMPLETE="windComplete";var LFocusEvent=function(){throw"LFocusEvent cannot be instantiated";};LFocusEvent.FOCUS_IN="focusIn";LFocusEvent.FOCUS_OUT="focusOut";
var LMouseEventContainer=function(){function a(){this.container={};this.dispatchAllEvent=!1;this.mouseDownContainer=[];this.mouseUpContainer=[];this.mouseMoveContainer=[];this.mouseOverContainer=[];this.mouseOutContainer=[];this.mouseDblContainer=[];this.textFieldInputContainer=[];this.buttonContainer=[]}a.prototype={pushInputBox:function(a){var b=this.textFieldInputContainer,c,f;c=0;for(f=b.length;c<f;c++)if(a.objectIndex==b[c].objectIndex)return;this.textFieldInputContainer.push(a)},removeInputBox:function(a){var b=
this.textFieldInputContainer,c,f;c=0;for(f=b.length;c<f;c++)if(a.objectIndex==b[c].objectIndex){this.textFieldInputContainer.splice(c,1);break}},pushButton:function(a){var b=this.buttonContainer,c,f;c=0;for(f=b.length;c<f;c++)if(a.objectIndex==b[c].objectIndex)return;this.buttonContainer.push(a)},removeButton:function(a){var b=this.buttonContainer,c,f;c=0;for(f=b.length;c<f;c++)if(a.objectIndex==b[c].objectIndex){this.buttonContainer.splice(c,1);break}},dispatchEventButton:function(a){var b=this.buttonContainer,
c;c=0;for(b=b.length;c<b;c++)"function"==typeof this.buttonContainer[c].ll_button_mode&&this.buttonContainer[c].ll_button_mode(a)},addEvent:function(a,b,c){b.push({container:a,listener:c})},removeEvent:function(a,b,c){var f,e;f=0;for(e=b.length;f<e;f++)if(b[f].container.objectIndex===a.objectIndex&&(!c||b[f].listener==c)){b.splice(f,1);break}},addMouseDownEvent:function(a,b){this.addEvent(a,this.mouseDownContainer,b)},addMouseUpEvent:function(a,b){this.addEvent(a,this.mouseUpContainer,b)},addMouseMoveEvent:function(a,
b){this.addEvent(a,this.mouseMoveContainer,b)},addMouseOverEvent:function(a,b){this.addEvent(a,this.mouseOverContainer,b)},addMouseOutEvent:function(a,b){this.addEvent(a,this.mouseOutContainer,b)},addMouseDblEvent:function(a,b){this.addEvent(a,this.mouseDblContainer,b)},addMouseEvent:function(a,b,c){b==LMouseEvent.MOUSE_DOWN?this.addMouseDownEvent(a,c):b==LMouseEvent.MOUSE_UP?this.addMouseUpEvent(a,c):b==LMouseEvent.MOUSE_OVER?this.addMouseOverEvent(a,c):b==LMouseEvent.MOUSE_OUT?this.addMouseOutEvent(a,
c):b==LMouseEvent.MOUSE_MOVE?this.addMouseMoveEvent(a,c):this.addMouseDblEvent(a,c)},hasEvent:function(a,b){for(var c=0,f=b.length;c<f;c++)if(b[c].container.objectIndex===a.objectIndex)return!0;return!1},removeMouseDownEvent:function(a,b){this.removeEvent(a,this.mouseDownContainer,b)},removeMouseUpEvent:function(a,b){this.removeEvent(a,this.mouseUpContainer,b)},removeMouseMoveEvent:function(a,b){this.removeEvent(a,this.mouseMoveContainer,b)},removeMouseOverEvent:function(a,b){this.removeEvent(a,this.mouseOverContainer,
b)},removeMouseOutEvent:function(a,b){this.removeEvent(a,this.mouseOutContainer,b)},removeMouseDblEvent:function(a,b){this.removeEvent(a,this.mouseDblContainer,b)},removeMouseEvent:function(a,b,c){b==LMouseEvent.MOUSE_DOWN?this.removeMouseDownEvent(a,c):b==LMouseEvent.MOUSE_UP?this.removeMouseUpEvent(a,c):b==LMouseEvent.MOUSE_OVER?this.removeMouseOverEvent(a,c):b==LMouseEvent.MOUSE_OUT?this.removeMouseOutEvent(a,c):b==LMouseEvent.MOUSE_MOVE?this.removeMouseMoveEvent(a,c):this.removeMouseDblEvent(a,
c)},dispatchMouseEvent:function(a,b){b==LMouseEvent.MOUSE_DOWN?(this.dispatchEvent(a,this.mouseDownContainer,LMouseEvent.MOUSE_DOWN),this.dispatchEvent(a,this.textFieldInputContainer)):b==LMouseEvent.MOUSE_UP?this.dispatchEvent(a,this.mouseUpContainer,LMouseEvent.MOUSE_UP):b==LMouseEvent.DOUBLE_CLICK?this.dispatchEvent(a,this.mouseDblContainer,LMouseEvent.DOUBLE_CLICK):(this.dispatchEventButton(a),this.dispatchEvent(a,this.mouseOutContainer,LMouseEvent.MOUSE_OUT),this.dispatchEvent(a,this.mouseOverContainer,
LMouseEvent.MOUSE_OVER),this.dispatchEvent(a,this.mouseMoveContainer,LMouseEvent.MOUSE_MOVE))},getRootParams:function(a){a=a.parent;for(var b={x:0,y:0,scaleX:1,scaleY:1};"root"!=a;)b.x*=a.scaleX,b.y*=a.scaleY,b.x+=a.x,b.y+=a.y,b.scaleX*=a.scaleX,b.scaleY*=a.scaleY,a=a.parent;return b},_mouseEnabled:function(a){if(!a||!a.parent||"root"==a.parent||!a.visible||typeof a.mouseEnabled!=UNDEFINED&&!a.mouseEnabled)return!1;for(a=a.parent;"root"!=a;){if(!a.mouseEnabled||!a.mouseChildren)return!1;a=a.parent;
if(!a)return!1}return!0},dispatchEvent:function(a,b,c){var f,e,m=[],k,g;k=0;for(g=b.length;k<g;k++)f=b[k].container||b[k],this._mouseEnabled(f)&&(e=this.getRootParams(f),!c&&f.mouseEvent?f.mouseEvent(a,LMouseEvent.MOUSE_DOWN,e):f.ismouseon(a,e)?c==LMouseEvent.MOUSE_OUT||c==LMouseEvent.MOUSE_OVER&&f.ll_mousein||(c!=LMouseEvent.MOUSE_UP&&(f.ll_mousein=!0),m.push({sp:f,co:e,listener:b[k].listener})):c!=LMouseEvent.MOUSE_OUT&&c!=LMouseEvent.MOUSE_OVER||!f.ll_mousein||(f.ll_mousein=!1,m.push({sp:f,co:e,
listener:b[k].listener})));if(0!=m.length)for(1<m.length&&(m=m.sort(this._sort.bind(this))),g=this.dispatchAllEvent?m.length:1,k=0;k<g&&k<m.length;k++)b=m[k],a.currentTarget=a.clickTarget=b.sp,a.target||(a.target=b.sp),a.event_type=c,a.selfX=(a.offsetX-b.co.x-b.sp.x)/(b.co.scaleX*b.sp.scaleX),a.selfY=(a.offsetY-b.co.y-b.sp.y)/(b.co.scaleY*b.sp.scaleY),b.listener(a,b.sp),1==g&&k<m.length-1&&b.sp.objectIndex==m[k+1].sp.objectIndex&&(m.splice(k,1),k--)},set:function(a,b){this.container[a]=b},_sort:function(a,
b){var c,f,e=this._getSort(a.sp),m=this._getSort(b.sp),k,g,h;k=0;g=e.length;for(h=m.length;k<g&&k<h;k++)if(c=e[k],f=m[k],c.objectIndex!=f.objectIndex)return f.parent.getChildIndex(f)-c.parent.getChildIndex(c);return m.length-e.length},_getSort:function(a){var b=a.parent;for(a=[a];"root"!=b;)a.unshift(b),b=b.parent;return a}};return new a}(),LKeyboardEvent=function(){throw"LKeyboardEvent cannot be instantiated";};LKeyboardEvent.KEY_DOWN="keydown";LKeyboardEvent.KEY_UP="keyup";
LKeyboardEvent.KEY_PRESS="keypress";var LAccelerometerEvent=function(){throw"LAccelerometerEvent cannot be instantiated";};LAccelerometerEvent.DEVICEMOTION="devicemotion";function LStageAlign(){throw"LStageAlign cannot be instantiated";}LStageAlign.TOP="T";LStageAlign.BOTTOM="B";LStageAlign.LEFT="L";LStageAlign.RIGHT="Re";LStageAlign.TOP_LEFT="TL";LStageAlign.TOP_RIGHT="TR";LStageAlign.TOP_MIDDLE="TM";LStageAlign.BOTTOM_LEFT="BL";LStageAlign.BOTTOM_RIGHT="BR";LStageAlign.BOTTOM_MIDDLE="BM";
LStageAlign.MIDDLE="M";function LStageScaleMode(){throw"LStageScaleMode cannot be instantiated";}LStageScaleMode.EXACT_FIT="exactFit";LStageScaleMode.SHOW_ALL="showAll";LStageScaleMode.NO_BORDER="noBorder";LStageScaleMode.NO_SCALE="noScale";
var LGlobal=function(){function a(){throw"LGlobal cannot be instantiated";}a.FULL_SCREEN="full_screen";a.traceDebug=!1;a.displayState=NONE;a.aspectRatio=NONE;a.canvasObj=null;a.canvas=null;a.webAudio=!0;a.objectIndex=1;a.stage=null;a.width=0;a.height=0;a.box2d=null;a.speed=50;a.IS_MOUSE_DOWN=!1;a.preventDefault=!0;a.childList=[];a.dragList=[];a.excludingContainer=[];a.stageScale="noScale";a.align="M";a.mobile=!1;a.canTouch=!1;a.os=OS_PC;a.ios=!1;a.android=!1;a.android_new=!1;a.backgroundColor=null;
a.destroy=!0;a.forceRefresh=!1;a.devicePixelRatio=window.devicePixelRatio||1;a.startTimer=0;a.keepClear=!0;a.top=0;a.left=0;a.window=window;(function(d){a.isFirefox=0<=d.toLowerCase().indexOf("firefox");if(0<d.indexOf(OS_IPHONE))a.os=OS_IPHONE,a.canTouch=!0,a.ios=!0;else if(0<d.indexOf(OS_IPOD))a.os=OS_IPOD,a.canTouch=!0,a.ios=!0;else if(0<d.indexOf(OS_IPAD))a.os=OS_IPAD,a.ios=!0,a.canTouch=!0;else if(0<d.indexOf(OS_ANDROID)){a.os=OS_ANDROID;a.canTouch=!0;a.android=!0;var b=d.indexOf(OS_ANDROID);
3<parseInt(d.substr(b+8,1))&&(a.android_new=!0)}else 0<d.indexOf(OS_WINDOWS_PHONE)?(a.os=OS_WINDOWS_PHONE,a.canTouch=!0):0<d.indexOf(OS_BLACK_BERRY)&&(a.os=OS_BLACK_BERRY,a.canTouch=!0);a.mobile=a.canTouch})(navigator.userAgent);a.setDebug=function(d){a.traceDebug=d};a.setCanvas=function(d,b,c){a.ll_createCanvas(d,b,c);a.ll_createStage();a.displayState==LStage.FULL_SCREEN?a.resize():"number"==typeof a.displayState&&a.resize(a.width*a.displayState,a.height*a.displayState);a.canTouch?(a.ll_clicks=0,
a.ll_prev_clickTime=0,LEvent.addEventListener(a.canvasObj,LMouseEvent.TOUCH_START,a.ll_touchStart),LEvent.addEventListener(document,LMouseEvent.TOUCH_END,a.ll_touchEnd),LEvent.addEventListener(a.canvasObj,LMouseEvent.TOUCH_MOVE,a.ll_touchMove)):(LEvent.addEventListener(a.canvasObj,LMouseEvent.DOUBLE_CLICK,a.ll_mouseDbclick),LEvent.addEventListener(a.canvasObj,LMouseEvent.MOUSE_DOWN,a.ll_mouseDown),LEvent.addEventListener(a.canvasObj,LMouseEvent.MOUSE_MOVE,a.ll_mouseMove),LEvent.addEventListener(a.canvasObj,
LMouseEvent.MOUSE_UP,a.ll_mouseUp),LEvent.addEventListener(a.canvasObj,LMouseEvent.MOUSE_OUT,a.ll_mouseOut))};a.ll_createCanvas=function(d,b,c){a.id=d;a.object=document.getElementById(d);a.object.innerHTML='<div style="position:absolute;margin:0;padding:0;overflow:visible;-webkit-transform:translateZ(0);z-index:0;"><canvas id="'+a.id+'_canvas" style="margin:0;padding:0;width:'+b+"px;height:"+c+'px;"><div id="noCanvas"><p>Hey there,it looks like you\'re using Microsoft\'s Internet Explorer. Microsoft hates the Web and doesn\'t support HTML5:(</p></div></canvas></div><div id="'+
a.id+'_InputText" style="position:absolute;margin:0;padding:0;z-index:10;display:none;"><textarea rows="1" id="'+a.id+'_InputTextareaBox" style="resize:none;background:transparent;border:0px;"></textarea><input type="text" id="'+a.id+'_InputTextBox"  style="background:transparent;border:0px;"/><input type="password" id="'+a.id+'_passwordBox"  style="background:transparent;border:0px;"/></div>';a.canvasObj=document.getElementById(a.id+"_canvas");a._canvas=document.createElement("canvas");a._context=
a._canvas.getContext("2d");a._context&&(a.canvasObj.innerHTML="");a.inputBox=document.getElementById(a.id+"_InputText");a.inputTextareaBoxObj=document.getElementById(a.id+"_InputTextareaBox");a.inputTextBoxObj=document.getElementById(a.id+"_InputTextBox");a.passwordBoxObj=document.getElementById(a.id+"_passwordBox");a.inputTextField=null;b&&(a.canvasObj.width=b);c&&(a.canvasObj.height=c);a.width=a.canvasObj.width;a.height=a.canvasObj.height;a.canvasStyleWidth=a.width;a.canvasStyleHeight=a.height;
a.canvas=a.canvasObj.getContext("2d");a.offsetX=mouseX=0;a.offsetY=mouseY=0};a.ll_createStage=function(){a.stage=new LSprite;a.stage.parent="root";a.childList.push(a.stage);a.stage.baseAddEvent=a.stage.addEventListener;a.stage.baseRemoveEvent=a.stage.removeEventListener;a.stage.addEventListener=function(d,b){d==LEvent.WINDOW_RESIZE?(a.stage.onresizeListener=b,a.stage.onresize=function(c){a.stage.onresizeEvent=c},LEvent.addEventListener(a.window,d,a.stage.onresize)):d==LKeyboardEvent.KEY_DOWN||d==
LKeyboardEvent.KEY_UP||d==LKeyboardEvent.KEY_PRESS?LEvent.addEventListener(a.window,d,b):a.stage.baseAddEvent(d,b)};a.stage.removeEventListener=function(d,b){d==LEvent.WINDOW_RESIZE?(LEvent.removeEventListener(a.window,LEvent.WINDOW_RESIZE,a.stage.onresize),delete a.stage.onresize,delete a.stage.onresizeListener):d==LKeyboardEvent.KEY_DOWN||d==LKeyboardEvent.KEY_UP||d==LKeyboardEvent.KEY_PRESS?LEvent.removeEventListener(a.window,d,b):a.stage.baseRemoveEvent(d,b)}};a.ll_touchStart=function(d){a.inputBox.style.display!=
NONE&&a.inputTextField._ll_getValue();var b,c,f,e;b=parseInt(0+a.object.style.left)+parseInt(a.canvasObj.style.marginLeft);c=parseInt(0+a.object.style.top)+parseInt(a.canvasObj.style.marginTop);if(LMultitouch.inputMode==LMultitouchInputMode.NONE)f=a.ll_touchStartEvent(d,0,b,c);else if(LMultitouch.inputMode==LMultitouchInputMode.TOUCH_POINT){e=0;for(var m=d.touches.length;e<m;e++)LMultitouch.touchs["touch"+d.touches[e].identifier]||(f=a.ll_touchStartEvent(d,e,b,c))}b=(new Date).getTime();a.ll_clicks=
b<=a.ll_prev_clickTime+500?a.ll_clicks+1:1;a.ll_prev_clickTime=b;2===a.ll_clicks&&(a.mouseEvent(f,LMouseEvent.DOUBLE_CLICK),a.ll_clicks=0);a.IS_MOUSE_DOWN=!0;a.mouseJoint_start&&a.mouseJoint_start(f);a.touchHandler(d)};a.ll_touchStartEvent=function(d,b,c,f){d={offsetX:d.touches[b].pageX-c,offsetY:d.touches[b].pageY-f,touchPointID:d.touches[b].identifier};d.offsetX=a.ll_scaleX(d.offsetX);d.offsetY=a.ll_scaleY(d.offsetY);mouseX=a.offsetX=d.offsetX;mouseY=a.offsetY=d.offsetY;LMultitouch.touchs["touch"+
d.touchPointID]=d;a.mouseEvent(d,LMouseEvent.MOUSE_DOWN);return a.buttonStatusEvent=d};a.ll_touchEnd=function(d){var b,c,f,e,m,k;if(LMultitouch.inputMode==LMultitouchInputMode.TOUCH_POINT)for(f in LMultitouch.touchs){b=LMultitouch.touchs[f];k=!1;e=0;for(m=d.touches.length;e<m;e++)if(d.touches[e].identifier==b.touchPointID){k=!0;break}k||(c=b,delete LMultitouch.touchs[f],a.mouseEvent(c,LMouseEvent.MOUSE_UP))}c||(c={offsetX:a.offsetX,offsetY:a.offsetY});a.mouseEvent(c,LMouseEvent.MOUSE_UP);a.touchHandler(d);
a.IS_MOUSE_DOWN=!1;a.buttonStatusEvent=null;a.mouseJoint_end&&a.mouseJoint_end()};a.ll_touchMove=function(d){var b,c,f,e,m=d.touches.length;b=parseInt(0+a.object.style.left)+parseInt(a.canvasObj.style.marginLeft);c=parseInt(0+a.object.style.top)+parseInt(a.canvasObj.style.marginTop);LMultitouch.inputMode==LMultitouchInputMode.NONE&&(m=1);i=0;for(e=d.touches.length;i<e&&i<m;i++)f={offsetX:d.touches[i].pageX-b,offsetY:d.touches[i].pageY-c,touchPointID:d.touches[i].identifier},f.offsetX=a.ll_scaleX(f.offsetX),
f.offsetY=a.ll_scaleY(f.offsetY),mouseX=a.offsetX=f.offsetX,mouseY=a.offsetY=f.offsetY,LMultitouch.touchs["touch"+f.touchPointID]&&LMultitouch.touchs["touch"+f.touchPointID].offsetX==f.offsetX&&LMultitouch.touchs["touch"+f.touchPointID].offsetY==f.offsetY||(a.buttonStatusEvent=f,LMultitouch.touchs["touch"+f.touchPointID]=f,a.mouseEvent(f,LMouseEvent.MOUSE_MOVE));a.touchHandler(d);a.mouseJoint_move&&a.mouseJoint_move(f)};a.ll_mouseDbclick=function(d){null==d.offsetX&&null!=d.layerX&&(d.offsetX=d.layerX,
d.offsetY=d.layerY);var b={button:d.button};b.offsetX=a.ll_scaleX(d.offsetX);b.offsetY=a.ll_scaleY(d.offsetY);a.mouseEvent(b,LMouseEvent.DOUBLE_CLICK)};a.ll_mouseDown=function(d){null==d.offsetX&&null!=d.layerX&&(d.offsetX=d.layerX,d.offsetY=d.layerY);a.inputBox.style.display!=NONE&&a.inputTextField._ll_getValue();var b={button:d.button};b.offsetX=a.ll_scaleX(d.offsetX);b.offsetY=a.ll_scaleY(d.offsetY);a.mouseEvent(b,LMouseEvent.MOUSE_DOWN);a.IS_MOUSE_DOWN=!0;a.mouseJoint_start&&a.mouseJoint_start(b)};
a.ll_mouseMove=function(d){null==d.offsetX&&null!=d.layerX&&(d.offsetX=d.layerX,d.offsetY=d.layerY);var b={};b.offsetX=a.ll_scaleX(d.offsetX);b.offsetY=a.ll_scaleY(d.offsetY);a.buttonStatusEvent=b;mouseX=a.offsetX=b.offsetX;mouseY=a.offsetY=b.offsetY;a.cursor="default";a.mouseEvent(b,LMouseEvent.MOUSE_MOVE);document.body.style.cursor=a.cursor;a.mouseJoint_move&&a.mouseJoint_move(b)};a.ll_mouseUp=function(d){null==d.offsetX&&null!=d.layerX&&(d.offsetX=d.layerX,d.offsetY=d.layerY);var b={button:d.button};
b.offsetX=a.ll_scaleX(d.offsetX);b.offsetY=a.ll_scaleY(d.offsetY);a.mouseEvent(b,LMouseEvent.MOUSE_UP);a.IS_MOUSE_DOWN=!1;a.mouseJoint_end&&a.mouseJoint_end()};a.ll_mouseOut=function(d){null==d.offsetX&&null!=d.layerX&&(d.offsetX=d.layerX,d.offsetY=d.layerY);var b={};b.offsetX=a.ll_scaleX(d.offsetX);b.offsetY=a.ll_scaleY(d.offsetY);a.mouseEvent(b,LMouseEvent.MOUSE_OUT);a.IS_MOUSE_DOWN=!1};a.touchHandler=function(d){d.stopPropagation();a.preventDefault&&d.preventDefault();d.stopImmediatePropagation&&
d.stopImmediatePropagation();return d};a.mouseEvent=function(d,b){b==LMouseEvent.MOUSE_MOVE&&a.dragHandler(d);if(LMouseEventContainer.container[b])LMouseEventContainer.dispatchMouseEvent(d,b);else for(var c=a.childList.length-1;0<=c&&(!a.childList[c].mouseEvent||!a.childList[c].mouseEvent(d,b));c--);};a.dragHandler=function(d){var b,c,f=a.dragList;for(b=f.length-1;0<=b;b--)if(c=f[b],!a.canTouch||c.ll_touchPointID==d.touchPointID){b=c.getAbsoluteScale();c.x=c.ll_dragStartX+(d.offsetX-c.ll_dragMX)*
c.scaleX/b.scaleX;c.y=c.ll_dragStartY+(d.offsetY-c.ll_dragMY)*c.scaleY/b.scaleY;break}};a._ll_mobile=function(){var d=.3*a.width,b,c=.05*a.width,f=.05*d,e=.15*d,m=.3*d,k=1.5*d*.2,g,h,n;g=new LSprite;addChild(g);d=.3*a.width;b=1.5*d;g.graphics.drawRoundRect(1,"#000000",[c,c,d,b,c],!0,"#cccccc");g.graphics.drawRoundRect(1,"#000000",[c+f,c+f,d-2*f,b-2*f,c],!0,"#000000");g.graphics.drawRect(1,"#ffffff",[c+e,c+k,d-2*e,b-2*k],!0,"#ffffff");g.graphics.drawArc(1,"#ffffff",[c+.5*d,c+b-3.5*f,1.5*f,0,2*Math.PI]);
g.graphics.drawRoundRect(1,"#ffffff",[c+m,c+e,d-2*m,f,.5*f]);h=new LSprite;h.x=.5*-(d-2*e);h.y=.5*-f;h.graphics.drawRect(1,"#ff0000",[0,0,d-2*e,f],!0,"#ff0000");n=new LSprite;n.y=.5*-(d-2*e);n.x=.5*-f;n.graphics.drawRect(1,"#ff0000",[0,0,f,d-2*e],!0,"#ff0000");f=new LSprite;f.x=c+m+.5*(d-2*m);f.y=c+k+.5*(b-2*k);f.rotate=45;f.addChild(h);f.addChild(n);g.addChild(f);d=new LSprite;d.graphics.drawVertices(2,"#000000",[[0,0],[e,e],[0,2*e]],!0,"#cccccc");d.x=1.5*c+b;d.y=1.5*c+.5*b;addChild(d);g.arrow=d;
window.onorientationchange=function(){setTimeout(function(){location.href=location.href},100)};return g};a.verticalError=function(){var d=.3*a.width,b=.05*a.width,c=a._ll_mobile(),f=c.clone();f.getChildAt(0).visible=!1;f.x=.5*a.width+b;addChild(f);c.rotate=90;c.x=.5*a.width+b;c.y=.5*d};a.horizontalError=function(){var d=.3*a.width,b=.05*a.width,c=a._ll_mobile(),f=c.clone();f.getChildAt(0).visible=!1;f.rotate=90;f.x=a.width-b;f.y=.5*d;addChild(f);c.arrow.x=1.5*b+d};a.onShow=function(){null!=a.canvas&&
(a.stage.onresizeEvent&&(a.stage.onresizeListener(a.stage.onresizeEvent),delete a.stage.onresizeEvent),a.forceRefresh&&(a.canvasObj.width=a.canvasObj.width,a.forceRefresh=!1),null!=a.box2d?(a.box2d.ll_show(),!a.traceDebug&&a.keepClear&&a.canvas.clearRect(0,0,a.width+1,a.height+1)):(a.keepClear&&a.canvas.clearRect(0,0,a.width+1,a.height+1),null!==a.backgroundColor&&(a.canvas.fillStyle=a.backgroundColor,a.canvas.fillRect(0,0,a.width,a.height))),a.show(a.childList))};a.show=function(a){for(var b=0,c=
a.length;b<c;b++)a[b]&&a[b].ll_show&&a[b].ll_show()};a.divideCoordinate=function(a,b,c,f){var e;a/=f;var m=b/c,k=[],g;for(b=0;b<c;b++){g=[];for(e=0;e<f;e++)g.push({x:a*e,y:m*b,width:a,height:m});k.push(g)}return k};a._create_loading_color=function(){var d=a.canvas.createRadialGradient(a.width/2,a.height,0,a.width/2,0,a.height);d.addColorStop(0,"red");d.addColorStop(.3,"orange");d.addColorStop(.4,"yellow");d.addColorStop(.5,"green");d.addColorStop(.8,"blue");d.addColorStop(1,"violet");return d};a.hitPolygon=
function(a,b,c){var f=0,e=a[0],m=b<=e[0],k=c<=e[1],g,h,n,r,p;g=1;for(h=a.length;g<h+1;g++)n=a[g%h],r=b<=n[0],p=c<=n[1],k!=p&&(m==r?m&&(f+=k?-1:1):b<=e[0]+(n[0]-e[0])*(c-e[1])/(n[1]-e[1])&&(f+=k?-1:1)),e=n,m=r,k=p;return 0!=f};a.hitTestPolygon=function(a,b){var c,f,e,m,k,g=[[a,[],[]],[b,[],[]]];for(f=0;f<g.length;f++){m=g[f][0];k=g[f][1];c=0;for(e=m.length;c<e;c++)g[f][2].push(new LVec2(m[c][0],m[c][1])),c<e-1&&k.push((new LVec2(m[c+1][0]-m[c][0],m[c+1][1]-m[c][1])).normL());k.push((new LVec2(m[0][0]-
m[e-1][0],m[0][1]-m[e-1][1])).normL())}for(f=0;f<g.length;f++)for(k=g[f][1],c=0,e=k.length;c<e;c++){m=LVec2.getMinMax(g[0][2],k[c]);var h=LVec2.getMinMax(g[1][2],k[c]);if(m.max_o<h.min_o||m.min_o>h.max_o)return!1}return!0};a.hitTestPolygonArc=function(d,b){if(a.hitPolygon(d,b[0],b[1]))return!0;var c,f,e,m,k,g;c=0;for(e=d.length;c<e;c++)if(f=c<e-1?c+1:0,m=d[c],k=d[f],f=new LVec2(b[0]-m[0],b[1]-m[1]),m=new LVec2(k[0]-m[0],k[1]-m[1]),g=m.normalize(),k=LVec2.dot(f,g),0>=k){if(f.x*f.x+f.y*f.y<b[3])return!0}else if(k*
k<m.x*m.x+m.y*m.y&&(f=LVec2.cross(f,g),f*f<b[3]))return!0;return!1};a.hitTestArc=function(a,b,c,f){var e=.5*a.getWidth(),m=.5*b.getWidth(),k=a._startX?a._startX():a.startX(),g=b._startX?b._startX():b.startX();a=a._startY?a._startY():a.startY();b=b._startY?b._startY():b.startY();typeof c!=UNDEFINED&&(k+=e-c,a+=e-c,e=c);typeof f!=UNDEFINED&&(g+=m-f,b+=m-f,m=f);c=k+e-g-m;f=a+e-b-m;return c*c+f*f<(e+m)*(e+m)};a.hitTestRect=function(a,b,c,f){var e=a.getWidth(),m=b.getWidth(),k=a.getHeight(),g=b.getHeight(),
h=a._startX?a._startX():a.startX(),n=b._startX?b._startX():b.startX();a=a._startY?a._startY():a.startY();b=b._startY?b._startY():b.startY();typeof c!=UNDEFINED&&(h+=.5*(e-c[0]),a+=.5*(k-c[1]),e=c[0],k=c[1]);typeof f!=UNDEFINED&&(n+=.5*(m-f[0]),b+=.5*(g-f[1]),m=f[0],g=f[1]);return(h>n?h:n)<=(h+e>n+m?n+m:h+e)&&(a>b?a:b)<=(a+k>b+g?b+g:a+k)};a.hitTest=a.hitTestRect;a.setFrameRate=function(d){a.frameRate&&clearInterval(a.frameRate);a.speed=d;a.frameRate=setInterval(function(){a.onShow()},d)};a.ll_scaleX=
function(d){return(d-a.left)*a.width/a.canvasStyleWidth};a.ll_scaleY=function(d){return(d-a.top)*a.height/a.canvasStyleHeight};a.ll_setStageSize=function(d,b){d=Math.ceil(d);b=Math.ceil(b);a.canvasObj.style.width=d+"px";a.canvasObj.style.height=b+"px";a.canvasStyleWidth=d;a.canvasStyleHeight=b};a.resize=function(d,b){var c,f,e=0,m=0,k=window.innerWidth,g=window.innerHeight;d&&(c=d);b&&(f=b);"noScale"==a.stageScale&&(c=d||a.width,f=b||a.height);switch(a.stageScale){case "exactFit":c=d||k;f=b||g;break;
case "noBorder":c=d||k;f=b||a.height*k/a.width;switch(a.align){case LStageAlign.BOTTOM:case LStageAlign.BOTTOM_LEFT:case LStageAlign.BOTTOM_RIGHT:case LStageAlign.BOTTOM_MIDDLE:e=g-f}break;case "showAll":k/g>a.width/a.height?(f=b||g,c=d||a.width*g/a.height):(c=d||k,f=b||a.height*k/a.width);default:switch(a.align){case LStageAlign.BOTTOM:case LStageAlign.BOTTOM_LEFT:e=g-f;break;case LStageAlign.RIGHT:case LStageAlign.TOP_RIGHT:m=k-c;break;case LStageAlign.TOP_MIDDLE:m=.5*(k-c);break;case LStageAlign.BOTTOM_RIGHT:e=
g-f;m=k-c;break;case LStageAlign.BOTTOM_MIDDLE:e=g-f;m=.5*(k-c);break;case LStageAlign.MIDDLE:e=.5*(g-f),m=.5*(k-c)}}a.canvasObj.style.marginTop=e+"px";a.canvasObj.style.marginLeft=m+"px";a.isFirefox&&(a.left=parseInt(a.canvasObj.style.marginLeft),a.top=parseInt(a.canvasObj.style.marginTop));a.ll_setStageSize(c,f)};a.sleep=function(a){for(var b=new Date;(new Date).getTime()-b.getTime()<a;);};a.screen=function(d){a.displayState=d;a.stage&&("number"==typeof a.displayState?a.resize(a.width*a.displayState,
a.height*a.displayState):a.resize())};return a}(),LSystem=LGlobal,LStage=LGlobal;Array.prototype.indexOf||(Array.prototype.indexOf=function(a,d){var b=this.length>>>0,c=Number(d)||0,c=0>c?Math.ceil(c):Math.floor(c);for(0>c&&(c+=b);c<b;c++)if(c in this&&this[c]===a)return c;return-1});Array.isArray||(Array.isArray=function(a){return"[object Array]"==Object.prototype.toString.apply(a)});
Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!==typeof this)throw new TypeError("Function.prototype.bind-what is trying to be bound is not callable");var d=Array.prototype.slice.call(arguments,1),b=this,c=function(){},f=function(){return b.apply(this instanceof c&&a?this:a,d.concat(Array.prototype.slice.call(arguments)))};c.prototype=this.prototype;f.prototype=new c;return f});
Array.prototype.find||(Array.prototype.find=function(a,d){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!==typeof a)throw new TypeError("predicate must be a function");for(var b=Object(this),c=b.length>>>0,f,e=0;e<c;e++)if(f=b[e],a.call(d,f,e,b))return f});
Array.prototype.findIndex||(Array.prototype.findIndex=function(a,d){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!==typeof a)throw new TypeError("predicate must be a function");for(var b=Object(this),c=b.length>>>0,f,e=0;e<c;e++)if(f=b[e],a.call(d,f,e,b))return e;return-1});
Array.prototype.forEach||(Array.prototype.forEach=function(a,d){var b,c;if(null==this)throw new TypeError(" this is null or not defined");var f=Object(this),e=f.length>>>0;if("function"!==typeof a)throw new TypeError(a+" is not a function");1<arguments.length&&(b=d);for(c=0;c<e;){var m;c in f&&(m=f[c],a.call(b,m,c,f));c++}});
Array.prototype.every||(Array.prototype.every=function(a,d){var b,c;if(null==this)throw new TypeError("this is null or not defined");var f=Object(this),e=f.length>>>0;if("function"!==typeof a)throw new TypeError;1<arguments.length&&(b=d);for(c=0;c<e;){var m;if(c in f&&(m=f[c],!a.call(b,m,c,f)))return!1;c++}return!0});
Array.prototype.some||(Array.prototype.some=function(a){if(null==this)throw new TypeError("Array.prototype.some called on null or undefined");if("function"!==typeof a)throw new TypeError;for(var d=Object(this),b=d.length>>>0,c=2<=arguments.length?arguments[1]:void 0,f=0;f<b;f++)if(f in d&&a.call(c,d[f],f,d))return!0;return!1});
function trace(){if(LGlobal.traceDebug){var a=document.getElementById("traceObject"),d;0<trace.arguments.length&&null==a&&(a=document.createElement("TEXTAREA"),a.id="traceObject",a.style.position="absolute",a.style.top=LGlobal.height+20+"px",a.style.width=LGlobal.width+"px",a.style.height="200px",document.body.appendChild(a));for(d=0;d<trace.arguments.length;d++)a.value=a.value+trace.arguments[d]+"\r\n",a.scrollTop=a.scrollHeight}}window.console||(window.console={log:trace,warn:trace});
function addChild(a){LGlobal.stage.addChild(a)}function removeChild(a){LGlobal.stage.removeChild(a)}
function init(a,d,b,c,f,e){LGlobal.speed=a;var m=function(){LGlobal.canTouch&&LGlobal.aspectRatio==LANDSCAPE&&window.innerWidth<window.innerHeight?LGlobal.horizontalError():LGlobal.canTouch&&LGlobal.aspectRatio==PORTRAIT&&window.innerWidth>window.innerHeight?LGlobal.verticalError():setTimeout(f,100);LGlobal.startTimer=(new Date).getTime()};null!=e&&e==LEvent.INIT?(LGlobal.frameRate=setInterval(function(){LGlobal.onShow()},a),LGlobal.setCanvas(d,b,c),m()):LEvent.addEventListener(window,"load",function(){LGlobal.frameRate=
setInterval(function(){LGlobal.onShow()},a);LGlobal.setCanvas(d,b,c);m()})}var LInit=init;
function base(a,d,b){var c=null,f=a.constructor.prototype,e={};"Object"==a.constructor.name&&console.warn("When you use the extends. You must make a method like 'XX.prototype.xxx=function(){}'. but not 'XX.prototype={xxx:function(){}}'.");typeof a.__ll__parent__==UNDEFINED&&(a.__ll__parent__=[],a.__ll__parent__=[]);a.__ll__parent__.push(d.prototype);for(c in f)e[c]=1;for(c in d.prototype)e[c]||(f[c]=d.prototype[c]);f.toString==Object.prototype.toString&&(f.toString=LObject.prototype.toString);d.apply(a,
b)}var LExtends=base;function getTimer(){return(new Date).getTime()-LGlobal.startTimer}function getExtension(a){a=a.match(/([^#?]+\.)([^.#?]+)/);return 3<=a.length?a[2].toLowerCase():null}
var LObject=function(){function a(){this.type="LObject";this.objectindex=this.objectIndex=++LGlobal.objectIndex}a.prototype={callParent:function(a,b){if(a&&b){var c=!1,f,e="__ll__parent_call"+a;"undefined"==typeof this[e]?(c=!0,this[e]=0):this[e]++;if(this[e]>=this.__ll__parent__.length)return!1;f=this.__ll__parent__[this[e]][a]?this.__ll__parent__[this[e]][a].apply(this,b):this.callParent(a,b);c&&delete this[e];return f}},toString:function(){return"[object "+this.constructor.name+"]"}};return a}(),
LMatrix=function(){function a(a,b,c,f,e,m,k,g,h){this.a=1;this.c=this.u=this.b=0;this.d=1;this.ty=this.tx=this.v=0;this.w=1;typeof a!=UNDEFINED&&(this.a=a);typeof b!=UNDEFINED&&(this.b=b);typeof c!=UNDEFINED&&(this.c=c);typeof f!=UNDEFINED&&(this.d=f);typeof e!=UNDEFINED&&(this.tx=e);typeof m!=UNDEFINED&&(this.ty=m);typeof k!=UNDEFINED&&(this.u=k);typeof g!=UNDEFINED&&(this.v=g);typeof h!=UNDEFINED&&(this.w=h)}a.prototype={setTo:function(a,b,c,f,e,m,k,g,h){typeof a!=UNDEFINED&&(this.a=a);typeof b!=
UNDEFINED&&(this.b=b);typeof c!=UNDEFINED&&(this.c=c);typeof f!=UNDEFINED&&(this.d=f);typeof e!=UNDEFINED&&(this.tx=e);typeof m!=UNDEFINED&&(this.ty=m);typeof k!=UNDEFINED&&(this.u=k);typeof g!=UNDEFINED&&(this.v=g);typeof h!=UNDEFINED&&(this.w=h);return this},isIdentity:function(){return 1==this.a&&0==this.b&&0==this.c&&1==this.d&&0==this.tx&&0==this.ty&&0==u&&0==v&&1==w},transform:function(a){a.transform(this.a,this.b,this.c,this.d,this.tx,this.ty);return this},toString:function(){return"[object LMatrix]"},
identity:function(){this.setTo(1,0,0,1,0,0,0,0,1)},rotate:function(d){var b=d*Math.PI/180;d=Math.cos(b);b=Math.sin(b);d=new a(d,b,-b,d,0,0,0,0,1);this.add(d)},scale:function(d,b){var c=new a(d,0,0,b,0,0,0,0,1);this.add(c)},translate:function(d,b){var c=new a(1,0,0,1,d,b,0,0,1);this.add(c)},skew:function(d,b){mtx=new a(0,b,d,0,0,0,0,0,1);s.add(mtx)},add:function(a){this.setTo(this.a*a.a+this.b*a.c+this.u*a.tx,this.a*a.b+this.b*a.d+this.u*a.ty,this.c*a.a+this.d*a.c+this.v*a.tx,this.c*a.b+this.d*a.d+
this.v*a.ty,this.tx*a.a+this.ty*a.c+this.w*a.tx,this.tx*a.b+this.ty*a.d+this.w*a.ty,this.a*a.u+this.b*a.v+this.u*a.w,this.c*a.u+this.d*a.v+this.v*a.w,this.tx*a.u+this.ty*a.v+this.w*a.w)},toArray:function(a){return Array.isArray(a)&&3==a.length?[a[0]*this.a+a[1]*this.c+a[2]*this.tx,a[0]*this.b+a[1]*this.d+a[2]*this.ty,a[0]*this.u+a[1]*this.v+a[2]*this.w]:[this.a*a.a+this.b*a.c+this.u*a.tx,this.a*a.b+this.b*a.d+this.u*a.ty,this.c*a.a+this.d*a.c+this.v*a.tx,this.c*a.b+this.d*a.d+this.v*a.ty,this.tx*
a.a+this.ty*a.c+this.w*a.tx,this.tx*a.b+this.ty*a.d+this.w*a.ty,this.a*a.u+this.b*a.v+this.u*a.w,this.c*a.u+this.d*a.v+this.v*a.w,this.tx*a.u+this.ty*a.v+this.w*a.w]},clone:function(){return new a(this.a,this.b,this.c,this.d,this.tx,this.ty,this.u,this.v,this.w)}};return a}(),LVec2=function(){function a(a,b){this.x=a||0;this.y=b||0}a.dot=function(a,b){return a.x*b.x+a.y*b.y};a.cross=function(a,b){return a.x*b.y-a.y*b.x};a.distance=function(a,b){var c=a.x-b.x,f=a.y-b.y;return Math.sqrt(c*c+f*f)};a.getMinMax=
function(d,b){for(var c=a.dot(d[0],b),f=a.dot(d[0],b),e=0,m=0,k=1;k<d.length;k++){var g=a.dot(d[k],b);c>g&&(c=g,e=k);f<g&&(f=g,m=k)}return{min_o:c,min_i:e,max_o:f,max_i:m}};a.prototype={length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){var d=this.length();return new a(this.x/d,this.y/d)},normR:function(){return new a(-this.y,this.x)},normL:function(){return new a(this.y,-this.x)}};return a}(),LEventDispatcher=function(){function a(){LExtends(this,LObject,[]);this._eventList=
[]}var d={addEventListener:function(c,a){this._eventList.push({listener:a,type:c})},removeEventListener:function(c,a){var e,b;b=this._eventList.length;for(e=0;e<b;e++)if(this._eventList[e]&&c==this._eventList[e].type&&this._eventList[e].listener==a){this._eventList.splice(e,1);break}},removeAllEventListener:function(){this._eventList=[]},dispatchEvent:function(c){var a,e=this._eventList.length,b="string"==typeof c?c:c.eventType;for(a=0;a<e;a++)if(this._eventList[a]&&b==this._eventList[a].type){if("string"==
typeof c)this.currentTarget=this.target=this,this.eventType=this.event_type=b,this._eventList[a].listener(this);else if(c.target||(c.target=this),c.currentTarget||(c.currentTarget=c.target),c._ll_preventDefault=!1,this._eventList[a].listener(c),c._ll_preventDefault)break;return!0}return!1},hasEventListener:function(c,a){var e,b=this._eventList.length;for(e=0;e<b;e++)if(this._eventList[e]&&c==this._eventList[e].type&&(typeof a==UNDEFINED||a==this._eventList[e].listener))return!0;return!1}},b;for(b in d)a.prototype[b]=
d[b];return a}(),LDisplayObject=function(){function a(){LExtends(this,LEventDispatcher,[]);this.name="instance"+this.objectIndex;this.height=this.width=this.y=this.x=0;this.alpha=this.scaleY=this.scaleX=1;this.visible=!0;this.rotate=0;this.filters=this.blendMode=this.mask=null}var d={_createCanvas:function(){this._canvas||(this._canvas=document.createElement("canvas"),this._context=this._canvas.getContext("2d"))},ll_show:function(){var c=LGlobal.canvas;this._canShow()&&(LGlobal.box2d||"function"!=
typeof this._ll_loopframe||this._ll_loopframe(),c.save(),this._showReady(c),this.blendMode&&(c.globalCompositeOperation=this.blendMode),this.filters&&this._ll_setShadow(),this._rotateReady(),null!=this.mask&&this.mask.ll_show&&(this.mask.ll_show(),c.clip()),this._transformRotate(),this._transformScale(),this._coordinate(c),1>this.alpha&&(c.globalAlpha=this.alpha),this._ll_show(c),c.restore(),null!=LGlobal.box2d&&"function"==typeof this._ll_loopframe&&this._ll_loopframe())},_canShow:function(){return this.visible},
_coordinate:function(c){0==this.x&&0==this.y||c.transform(1,0,0,1,this.x,this.y)},_rotateReady:function(){},_showReady:function(c){},_ll_show:function(c){},_ll_setShadow:function(){var c=this.filters,a,e;if(c)for(a=0,e=c.length;a<e;a++)c[a].ll_show()},_transformRotate:function(){var c;0!=this.rotate&&(c=LGlobal.canvas,rotateFlag=Math.PI/180,rotateObj=new LMatrix,typeof this.rotatex==UNDEFINED&&(this.rotatey=this.rotatex=0),this.box2dBody&&(rotateFlag=1),rotateObj.a=Math.cos(this.rotate*rotateFlag),
rotateObj.b=Math.sin(this.rotate*rotateFlag),rotateObj.c=-rotateObj.b,rotateObj.d=rotateObj.a,rotateObj.tx=this.x+this.rotatex,rotateObj.ty=this.y+this.rotatey,rotateObj.transform(c).setTo(1,0,0,1,-rotateObj.tx,-rotateObj.ty).transform(c))},_transformScale:function(){var c=LGlobal.canvas,a;if(1!=this.scaleX||1!=this.scaleY)a=new LMatrix,1!=this.scaleX&&(a.tx=this.x),1!=this.scaleY&&(a.ty=this.y),a.a=this.scaleX,a.d=this.scaleY,a.transform(c).setTo(1,0,0,1,-a.tx,-a.ty).transform(c)},copyProperty:function(c){for(var a in c)"number"==
typeof c[a]||"string"==typeof c[a]||"boolean"==typeof c[a]?"objectindex"!=a&&"objectIndex"!=a&&(this[a]=c[a]):Array.isArray(c[a])&&(this[a]=c[a].slice());c.mask&&(this.mask=c.mask.clone())},getAbsoluteScale:function(){var c,a,e;c=this.scaleX;a=this.scaleY;for(e=this.parent;e&&"root"!=e;)c*=e.scaleX,a*=e.scaleY,e=e.parent;return{scaleX:c,scaleY:a}},getRootCoordinate:function(){var c,a,e;c=this.x;a=this.y;for(e=this.parent;e&&"root"!=e;)c*=e.scaleX,a*=e.scaleY,c+=e.x,a+=e.y,e=e.parent;return new LPoint(c,
a)},getBounds:function(c){if(typeof c==UNDEFINED)return new LRectangle(0,0,0,0);var a=0,e=0,b=0,d=0,g;this.objectIndex!=c.objectIndex&&(e=this.getRootCoordinate(),g=c.getRootCoordinate(),a=e.x-g.x,e=e.y-g.y);c.getWidth&&(b=c.getWidth());c.getHeight&&(d=c.getHeight());return new LRectangle(a,e,b,d)},getDataCanvas:function(){var c,a,e,b,d,g;this._createCanvas();a=LGlobal.canvasObj;b=LGlobal.canvas;c=this._canvas;e=this._context;this.width=this.getWidth();this.height=this.getHeight();c.width=this.width;
c.height=this.height;e.clearRect(0,0,this.width,this.height);LGlobal.canvasObj=this._canvas;LGlobal.canvas=this._context;d=this.x;g=this.y;this.x=this.y=0;this.ll_show();this.x=d;this.y=g;this._canvas=c;this._context=e;LGlobal.canvasObj=a;LGlobal.canvas=b;return this._canvas},getDataURL:function(){var c=this.getDataCanvas();return c.toDataURL.apply(c,arguments)},ismouseonShapes:function(c,a,e){var b,d,g,h;typeof c==UNDEFINED&&(c=this.shapes);b=this.getRootMatrix();for(g=c.length-1;0<=g;g--)if(d=c[g],
h=d.arg,h=this._changeShape(d.type,h,b),d.type==LShape.VERTICES){if(LGlobal.hitPolygon(h,a,e))return!0}else if(d.type==LShape.RECT){if(LGlobal.hitPolygon(h,a,e))return!0}else if(d.type==LShape.ARC&&(h[0]-a)*(h[0]-a)+(h[1]-e)*(h[1]-e)<h[3])return!0;return!1},_changeShape:function(c,a,e){var b,d;if(c==LShape.VERTICES)for(b=[],c=0,d=a.length;c<d;c++)b[c]=e.toArray([a[c][0],a[c][1],1]);else if(c==LShape.RECT)for(b=[[a[0],a[1]],[a[0]+a[2],a[1]],[a[0]+a[2],a[1]+a[3]],[a[0],a[1]+a[3]]],c=0,d=b.length;c<
d;c++)b[c]=e.toArray([b[c][0],b[c][1],1]);else c==LShape.ARC&&(b=e.toArray([a[0],a[1],1]),a=e.toArray([a[0]+a[2],a[1],1]),a=(b[0]-a[0])*(b[0]-a[0])+(b[1]-a[1])*(b[1]-a[1]),b=[b[0],b[1],Math.sqrt(a),a]);return b},getRootMatrix:function(){for(var c=this,a=new LMatrix;c&&"root"!=c;)1==c.scaleX&&1==c.scaleY||a.scale(c.scaleX,c.scaleY),0!=c.rotate&&a.rotate(c.rotate),0==c.x&&0==c.y||a.translate(c.x,c.y),c=c.parent;return a},remove:function(){var c=this.parent;c&&"root"!=c&&c.removeChild(this)}},b;for(b in d)a.prototype[b]=
d[b];return a}(),LInteractiveObject=function(){function a(){LExtends(this,LDisplayObject,[]);this.type="LInteractiveObject";this.mouseEnabled=!0;this.mouseList=[]}var d={addEventListener:function(c,a){0<=c.indexOf("mouse")||0<=c.indexOf("touch")||c==LMouseEvent.DOUBLE_CLICK?LMouseEventContainer.container[c]||(c==LMouseEvent.MOUSE_OVER||c==LMouseEvent.MOUSE_OUT)&&LMouseEventContainer.container[LMouseEvent.MOUSE_MOVE]?LMouseEventContainer.addMouseEvent(this,c,a):this.mouseList.push({listener:a,type:c}):
this._eventList.push({listener:a,type:c})},removeEventListener:function(c,a){var e,b;if(0<=c.indexOf("mouse")||0<=c.indexOf("touch")||c==LMouseEvent.DOUBLE_CLICK)if(LMouseEventContainer.container[c]||(c==LMouseEvent.MOUSE_OVER||c==LMouseEvent.MOUSE_OUT)&&LMouseEventContainer.container[LMouseEvent.MOUSE_MOVE])LMouseEventContainer.removeMouseEvent(this,c,a);else for(b=this.mouseList.length,e=0;e<b;e++){if(this.mouseList[e]&&c==this.mouseList[e].type&&this.mouseList[e].listener==a){this.mouseList.splice(e,
1);break}}else return this.callParent("removeEventListener",arguments)},removeAllEventListener:function(){this.mouseList.length=0;this._eventList.length=0;LMouseEventContainer.container[LMouseEvent.MOUSE_DOWN]&&LMouseEventContainer.removeMouseEvent(this,LMouseEvent.MOUSE_DOWN);LMouseEventContainer.container[LMouseEvent.MOUSE_UP]&&LMouseEventContainer.removeMouseEvent(this,LMouseEvent.MOUSE_UP);LMouseEventContainer.container[LMouseEvent.MOUSE_MOVE]&&(LMouseEventContainer.removeMouseEvent(this,LMouseEvent.MOUSE_MOVE),
LMouseEventContainer.removeMouseEvent(this,LMouseEvent.MOUSE_OVER),LMouseEventContainer.removeMouseEvent(this,LMouseEvent.MOUSE_OUT))},hasEventListener:function(c){var a,e;if(0<=c.indexOf("mouse")||0<=c.indexOf("touch")||c==LMouseEvent.DOUBLE_CLICK)for(e=this.mouseList.length,a=0;a<e;a++){if(this.mouseList[a]&&c==this.mouseList[a].type)return!0}else return this.callParent("hasEventListener",arguments);return!1}},b;for(b in d)a.prototype[b]=d[b];return a}(),LDisplayObjectContainer=function(){function a(){LExtends(this,
LInteractiveObject,[]);this.childList=[];this.numChildren=0;this.mouseChildren=!0}var d={addChild:function(c){var a;c.parent&&(a=LGlobal.destroy,LGlobal.destroy=!1,c.parent.removeChild(c),LGlobal.destroy=a);c.parent=this;this.childList.push(c);this.numChildren=this.childList.length;return c},addChildAt:function(c,a){var e;if(!(0>a||a>this.childList.length))return"function"==typeof c.remove&&(e=LGlobal.destroy,LGlobal.destroy=!1,c.remove(),LGlobal.destroy=e),c.parent=this,this.childList.splice(a,0,
c),this.numChildren=this.childList.length,c},removeChild:function(c){var a=this.childList,e,b;e=0;for(b=a.length;e<b;e++)if(c.objectIndex==a[e].objectIndex){LGlobal.destroy&&c.die&&c.die();this.childList.splice(e,1);break}this.numChildren=this.childList.length;delete c.parent},getChildAt:function(c){var a=this.childList;return 0==a.length||a.length<=c?null:a[c]},getChildByName:function(c){var a=this.childList;i=0;for(l=a.length;i<l;i++)if(a[i]&&a[i].name==c)return a[i];return null},removeChildAt:function(c){var a=
this.childList;if(!(a.length<=c))return LGlobal.destroy&&a[c].die&&a[c].die(),c=this.childList.splice(c,1),this.numChildren=this.childList.length,c},getChildIndex:function(c){if(!c)return-1;var a=this.childList,e,b=a.length;for(e=0;e<b;e++)if(a[e].objectIndex==c.objectIndex)return e;return-1},setChildIndex:function(c,a){var e=this.childList,b,d=e.length;if("root"==c.parent||c.parent.objectIndex!=this.objectIndex||0>a||a>=d)return-1;for(b=0;b<d&&e[b].objectIndex!=c.objectIndex;b++);this.childList.splice(b,
1);this.childList.splice(a,0,c);return a},resize:function(){this.width=this.getWidth();this.height=this.getHeight()},removeAllChild:function(){var c=this.childList,a,e;a=0;for(e=c.length;a<e;a++)LGlobal.destroy&&c[a].die&&c[a].die();this.numChildren=this.height=this.width=this.childList.length=0}},b;for(b in d)a.prototype[b]=d[b];return a}(),LLoader=function(){function a(){LExtends(this,LEventDispatcher,[]);this.type="LLoader"}a.TYPE_BITMAPDATE="bitmapData";a.prototype.load=function(d,b){var c=this;
b||(b=a.TYPE_BITMAPDATE);c.loadtype=b;b==a.TYPE_BITMAPDATE&&(c.content=new Image,c.content.onload=function(){c.content.onload=null;var a=new LEvent(LEvent.COMPLETE);a.currentTarget=c;a.target=c.content;c.dispatchEvent(a);delete c.content},c.content.src=d)};return a}(),LURLLoader=function(){function a(){LExtends(this,LEventDispatcher,[]);this.type="LURLLoader";this.loadtype="";this.content=null;this.event={}}a.TYPE_TEXT="text";a.TYPE_JS="js";a.prototype.load=function(d,b){var c=this,f,e;b||(e=getExtension(d),
"txt"==e?b=a.TYPE_TEXT:"js"==e&&(b=a.TYPE_JS));c.loadtype=b;b==a.TYPE_TEXT?LAjax.get(d,{},function(a){f=new LEvent(LEvent.COMPLETE);c.data=a;f.currentTarget=c;f.target=a;c.dispatchEvent(f);delete c.content;delete c.data}):b==a.TYPE_JS&&(e=document.createElement("script"),e.onload=function(){f=new LEvent(LEvent.COMPLETE);f.currentTarget=c;f.target=c;c.dispatchEvent(f);delete c.content},e.src=d,e.type="text/javascript",document.querySelector("head").appendChild(e))};return a}(),LWebAudio=function(){function a(){LExtends(this,
LEventDispatcher,[]);this.loopIndex=this.loopEnd=this.loopStart=this.length=this.currentSave=this.currentStart=this.currentTime=0;this.loopLength=1;this.playing=!1;this.volume=1;LSound.Container.add(this)}a.container=[];a.containerCount=0;a.audioTag=new Audio;a._context=null;var d={getWebAudio:function(){var c;if(0<a.containerCount)c=a.container.shift();else if(typeof webkitAudioContext!==UNDEFINED)try{c=new webkitAudioContext}catch(f){a.containerCount=a.container.length,c=a.container.shift()}else if(typeof AudioContext!==
UNDEFINED)try{c=new AudioContext}catch(e){a.containerCount=a.container.length,c=a.container.shift()}else throw"AudioContext not supported.:(";c.createGainNode||(c.createGainNode=c.createGain);a.container.push(c);return c},onload:function(c){"[object AudioBuffer]"!==Object.prototype.toString.apply(c)?this.load(c):(this.data||(this.data=this.getWebAudio()),this.buffer=c,this.length=this.buffer.duration,c=new LEvent(LEvent.COMPLETE),c.currentTarget=this,c.target=this.buffer,this.dispatchEvent(c))},_onended:function(){this.dispatchEvent(LEvent.SOUND_COMPLETE);
++this.loopIndex<this.loopLength?this.play(this.currentStart,void 0,this.currentTimeTo):this.close()},load:function(c){var f=this;if("string"!==typeof c)if("[object AudioBuffer]"==Object.prototype.toString.apply(c))f.onload(c);else"[object ArrayBuffer]"==Object.prototype.toString.apply(c)&&(f.data||(f.data=f.getWebAudio()),f.data.decodeAudioData(c,f.onload.bind(f),function(c){throw"AudioContext decodeAudioData error:"+c.toString();}));else{var e,b,d,g={mov:["quicktime"],"3gp":["3gpp"],midi:["midi"],
mid:["midi"],ogv:["ogg"],m4a:["acc"],mp3:["mpeg"],wav:["wav","x-wav","wave"],wave:["wav","x-wav","wave"],aac:["mp4","aac"]};c=c.split(",");for(d=0;d<c.length;d++)if(e=c[d].split("."),b=e[e.length-1],b=g[b]?g[b]:[b],b=b.some(function(c,e,b){return a.audioTag.canPlayType(f._type+"/"+c)})){LAjax.responseType=LAjax.ARRAY_BUFFER;LAjax.get(c[d],{},f.onload.bind(f));break}else console.warn("Not support "+e[e.length-1]+":"+c[d]),e=new LEvent(LEvent.COMPLETE),e.currentTarget=e.target=f,f.dispatchEvent(e)}},
getCurrentTime:function(){return this.playing?this.data.currentTime-this.currentSave+this.currentTime:this.currentSave},setVolume:function(c){this.volume=c;this.playing&&(this.volumeNode.gain.value=c)},getVolume:function(){return this.volume},play:function(c,a,e){0!=this.length&&(typeof a!==UNDEFINED&&(this.loopIndex=0,this.loopLength=a),typeof c!==UNDEFINED&&(this.currentStart=this.currentTime=c),this.currentTimeTo=typeof e!==UNDEFINED?e>this.length?this.length:e:this.length,this.data.loop=!1,this.playing=
!0,this.timeout&&(clearTimeout(this.timeout),delete this.timeout),this.timeout=setTimeout(this._onended.bind(this),1E3*(this.currentTimeTo-this.currentTime)),this.bufferSource=this.data.createBufferSource(),this.bufferSource.buffer=this.buffer,this.volumeNode=this.data.createGainNode(),this.volumeNode.gain.value=this.volume,this.volumeNode.connect(this.data.destination),this.bufferSource.connect(this.volumeNode),this.currentSave=this.data.currentTime,this.bufferSource.start?this.bufferSource.start(0,
this.currentTime,this.length-this.currentTime):this.bufferSource.noteGrainOn(0,this.currentTime,this.length-this.currentTime))},playSegment:function(c,a,e){this.playTo(c,c+a,e)},playTo:function(c,a,e){this.play(c,e,a)},stop:function(){this.playing&&(this.timeout&&(clearTimeout(this.timeout),delete this.timeout),this.bufferSource.stop?this.bufferSource.stop(0):this.bufferSource.noteOff(0),this.currentTime=this.currentSave=this.getCurrentTime(),this.playing=!1)},close:function(){this.playing&&(this.timeout&&
(clearTimeout(this.timeout),delete this.timeout),this.bufferSource.stop?this.bufferSource.stop(0):this.bufferSource.noteOff(0),this.playing=!1,this.currentSave=this.currentTime=0)},ll_check:function(){this.playing&&this.currentTimeTo<this.data.currentTime-this.currentSave+.001*LSound.Container.time&&this._onended()},die:function(){LSound.Container.remove(this)}},b;for(b in d)a.prototype[b]=d[b];return a}(),LMedia=function(){function a(){LExtends(this,LDisplayObject,[]);this.loopIndex=this.length=
0;this.loopLength=1;this.playing=!1;this.onsoundcomplete=this.oncomplete=null;this.currentStart=0;LSound.Container.add(this)}var d={onload:function(){var c=this;if(c.data.readyState){c.length=c.data.duration-(LGlobal.android?.1:0);var a=new LEvent(LEvent.COMPLETE);a.currentTarget=c;a.target=c.data;c.dispatchEvent(a)}else c.data.addEventListener("canplaythrough",function(){c.onload()},!1)},_onended:function(){var c;this.dispatchEvent(LEvent.SOUND_COMPLETE);++this.loopIndex<this.loopLength?(c=this.loopIndex,
this.close(),this.play(this.currentStart,this.loopLength,this.currentTimeTo),this.loopIndex=c):this.close()},load:function(c){var a=this;if("[object HTMLAudioElement]"==Object.prototype.toString.apply(c))a.data=c,a.onload();else{var e,b,d,g={mov:["quicktime"],"3gp":["3gpp"],midi:["midi"],mid:["midi"],ogv:["ogg"],m4a:["acc"],mp3:["mpeg"],wav:["wav","x-wav","wave"],wave:["wav","x-wav","wave"],aac:["mp4","aac"]};c=c.split(",");for(d=0;d<c.length;d++){e=c[d].split(".");b=e[e.length-1];b=g[b]?g[b]:[b];
if(b=b.some(function(c,e,b){return a.data.canPlayType(a._type+"/"+c)})){a.data.src=c[d];a.onload();a.data.load();return}console.warn("Not support "+e[e.length-1]+":"+c[d]);e=new LEvent(LEvent.COMPLETE);e.currentTarget=e.target=a;a.dispatchEvent(e)}if(a.oncomplete)a.oncomplete({})}},getCurrentTime:function(){return this.data.currentTime},setVolume:function(c){this.data.volume=c},getVolume:function(){return this.data.volume},play:function(c,a,e){var b=this;0!=b.length&&(LGlobal.android&&LSound.Container.stopOther(this),
typeof c!=UNDEFINED&&(b.data.currentTime=c,b.currentStart=c),typeof a!=UNDEFINED&&(b.loopLength=a),b.currentTimeTo=typeof e!==UNDEFINED?e>b.length?b.length:e:b.length,b.timeout&&(clearTimeout(b.timeout),delete b.timeout),b.timeout=setTimeout(function(){b._onended()},1E3*(b.currentTimeTo-b.data.currentTime)),b.data.loop=!1,b.loopIndex=0,b.playing=!0,b.data.play())},playSegment:function(c,a,e){this.playTo(c,c+a,e)},playTo:function(c,a,e){this.play(c,e,a)},stop:function(){this.playing&&(this.timeout&&
(clearTimeout(this.timeout),delete this.timeout),this.playing=!1,this.data.pause())},close:function(){this.playing&&(this.timeout&&(clearTimeout(this.timeout),delete this.timeout),this.playing=!1,this.data.pause(),this.currentSave=this.data.currentTime=0)},ll_check:function(){this.playing&&this.currentTimeTo<this.data.currentTime+.005*LSound.Container.time&&this._onended()},die:function(){LSound.Container.remove(this)}},b;for(b in d)a.prototype[b]=d[b];return a}(),LSound=function(){function a(c){this.type=
"LSound";this._type="audio";a.webAudioEnabled&&LGlobal.webAudio?LExtends(this,LWebAudio,[]):(LExtends(this,LMedia,[]),this.data=new Audio,this.data.loop=!1,this.data.autoplay=!1);c&&this.load(c)}a.TYPE_SOUND="sound";a.webAudioEnabled=!1;var d=location.protocol;if("http:"==d||"https:"==d){if(typeof webkitAudioContext!==UNDEFINED)try{LWebAudio._context=new webkitAudioContext}catch(b){}else if(typeof AudioContext!==UNDEFINED)try{LWebAudio._context=new AudioContext}catch(c){}LWebAudio._context&&(LWebAudio.container.push(LWebAudio._context),
a.webAudioEnabled=!0)}a.Container={ll_save:0,time:0,list:[],ll_show:function(){var c=a.Container,e=(new Date).getTime();c.time=e-(c.ll_save?c.ll_save:e);c.ll_save=e;c=c.list;for(e=c.length-1;0<=e;e--)c[e]&&c[e].ll_check()},add:function(c){0<=a.Container.list.indexOf(c)||a.Container.list.push(c)},remove:function(c){for(var e=a.Container.list,b=e.length-1;0<=b;b--)if(e[b].objectIndex==c.objectIndex){e.splice(b,1);break}},stopOther:function(c){for(var e=a.Container.list,b=e.length-1;0<=b;b--)e[b].objectIndex!=
c.objectIndex&&e[b].stop()}};LGlobal.childList.push(a.Container);return a}(),LVideo=function(){function a(c){LExtends(this,LMedia,[]);this.type="LVideo";this._type="video";this.rotatey=this.rotatex=0;this.data=document.createElement("video");this.data.style.display="none";document.body.appendChild(this.data);this.data.id="video_"+this.objectIndex;this.data.loop=!1;this.data.autoplay=!1;c&&this.load(c)}var d={_ll_show:function(c){c.drawImage(this.data,this.x,this.y)},die:function(){document.body.removeChild(this.data);
delete this.data},getWidth:function(){return this.data.width},getHeight:function(){return this.data.height}},b;for(b in d)a.prototype[b]=d[b];return a}(),LPoint=function(){function a(a,b){this.x=a;this.y=b}a.distance=function(d,b){return a.distance2(d.x,d.y,b.x,b.y)};a.distance2=function(a,b,c,f){b=a-c;a-=c;return Math.sqrt(b*b+a*a)};a.interpolate=function(d,b,c){return new a(d.x+(b.x-d.x)*(1-c),d.y+(b.y-d.y)*(1-c))};a.polar=function(d,b){return new a(d*Math.cos(b),d*Math.sin(b))};a.prototype={toString:function(){return"[object LPoint("+
this.x+","+this.y+")]"},length:function(){return a.distance2(this.x,this.y,0,0)},add:function(d){return a(this.x+d.x,this.y+d.y)},clone:function(){return new a(this.x,this.y)},setTo:function(a,b){this.x=a;this.y=b},copyFrom:function(a){this.setTo(a.x,a.y)},equals:function(a){return this.x==a.x&&this.y==a.y},normalize:function(a){a/=this.length();this.x*=a;this.y*=a},offset:function(a,b){this.x+=a;this.y+=b},subtract:function(d){return new a(this.x-d.x,this.y-d.y)}};return a}(),LRectangle=function(){function a(a,
b,c,f){this.x=a;this.y=b;this.width=c;this.height=f;this.setRectangle()}a.prototype={setRectangle:function(){this.bottom=this.y+this.height;this.right=this.x+this.width;this.left=this.x;this.top=this.y},clone:function(){return new a(this.x,this.y,this.width,this.height)},contains:function(a,b){return a>=this.x&&a<=this.right&&b>=this.y&&b<=this.bottom},containsRect:function(a){return a.x>=this.x&&a.right<=this.right&&a.y>=this.y&&a.bottom<=this.bottom},equals:function(a){return a.x==this.x&&a.width==
this.width&&a.y==this.y&&a.height==this.height},inflate:function(a,b){this.width+=a;this.height+=b;this.setRectangle()},intersection:function(d){var b=this.x>d.x?this.x:d.x,c=this.y>d.y?this.y:d.y,f=this.right>d.right?d.right:this.right;d=this.bottom>d.bottom?d.bottom:this.bottom;return b<=f&&c<=d?new a(b,c,f,d):new a(0,0,0,0)},intersects:function(a){var b=this.y>a.y?this.y:a.y,c=this.bottom>a.bottom?a.bottom:this.bottom;return(this.x>a.x?this.x:a.x)<=(this.right>a.right?a.right:this.right)&&b<=c},
isEmpty:function(){return 0==this.x&&0==this.y&&0==this.width&&0==this.height},offset:function(a,b){this.x+=a;this.y+=b;this.setRectangle()},setEmpty:function(){this.height=this.width=this.y=this.x=0;this.setRectangle()},setTo:function(a,b,c,f){this.x=a;this.y=b;this.width=c;this.height=f;this.setRectangle()},toString:function(){return"[object LRectangle("+this.x+","+this.y+","+this.width+","+this.height+")]"},union:function(d){return new a(this.x>d.x?d.x:this.x,this.y>d.y?d.y:this.y,this.right>d.right?
this.right:d.right,this.bottom>d.bottom?this.bottom:d.bottom)}};return a}(),LGraphics=function(){function a(){LExtends(this,LObject,[]);this.type="LGraphics";this.color="#000000";this.alpha=1;this.bitmap=null;this.setList=[];this.showList=[]}var d={ll_show:function(){var c,a=this.setList.length;if(0!=a)for(c=0;c<a;c++)this.setList[c]()},clone:function(){var c=new a,f,b,d;c.color=this.color;c.alpha=this.alpha;c.bitmap=this.bitmap;f=0;for(b=this.setList.length;f<b;f++)d=this.setList[f],c.setList.push(d);
f=0;for(b=this.showList.length;f<b;f++)d=this.showList[f],c.showList.push(d);return c},lineCap:function(c){this.setList.push(function(){LGlobal.canvas.lineCap=c})},lineJoin:function(c){this.setList.push(function(){LGlobal.canvas.lineJoin=c})},lineWidth:function(c){this.setList.push(function(){LGlobal.canvas.lineWidth=c})},strokeStyle:function(c){this.setList.push(function(){LGlobal.canvas.strokeStyle=c})},stroke:function(){this.setList.push(function(){LGlobal.canvas.stroke()})},beginPath:function(){this.setList.push(function(){LGlobal.canvas.beginPath()})},
closePath:function(){this.setList.push(function(){LGlobal.canvas.closePath()})},moveTo:function(c,a){this.setList.push(function(){LGlobal.canvas.moveTo(c,a)});this.showList.push({type:LShape.POINT,arg:[c,a]})},lineTo:function(c,a){this.setList.push(function(){LGlobal.canvas.lineTo(c,a)});this.showList.push({type:LShape.POINT,arg:[c,a]})},rect:function(c,a,b,d){this.setList.push(function(){LGlobal.canvas.rect(c,a,b,d)});this.showList.push({type:LShape.RECT,arg:[c,a,b,d]})},fillStyle:function(c){this.setList.push(function(){LGlobal.canvas.fillStyle=
c})},fill:function(){this.setList.push(function(){LGlobal.canvas.fill()})},arc:function(c,a,b,d,k,g){this.setList.push(function(){LGlobal.canvas.arc(c,a,b,d,k,g)});this.showList.push({type:LShape.ARC,arg:d})},lineStyle:function(c,a){var b;null==a&&(a=this.color);this.color=a;this.setList.push(function(){b=LGlobal.canvas;b.lineWidth=c;b.strokeStyle=a})},clear:function(){this.bitmap=null;this.setList.length=0;this.showList.length=0},beginBitmapFill:function(a){var f=this;f.setList.push(function(){f.bitmap=
a})},drawEllipse:function(a,f,b,d,k){var g=this;g.setList.push(function(){var h,n,r,p,q,t,x,y,z;h=LGlobal.canvas;h.beginPath();n=b[0];r=b[1];p=b[2];q=b[3];t=p/2*.5522848;x=q/2*.5522848;y=n+p;z=r+q;p=n+p/2;q=r+q/2;h.moveTo(n,q);h.bezierCurveTo(n,q-x,p-t,r,p,r);h.bezierCurveTo(p+t,r,y,q-x,y,q);h.bezierCurveTo(y,q+x,p+t,z,p,z);h.bezierCurveTo(p-t,z,n,q+x,n,q);g.bitmap?(h.save(),h.clip(),h.drawImage(g.bitmap.image,g.bitmap.x,g.bitmap.y,g.bitmap.width,g.bitmap.height,0,0,g.bitmap.width,g.bitmap.height),
h.restore(),g.bitmap=null):(d&&(h.fillStyle=k,h.fill()),0<a&&(h.lineWidth=a,h.strokeStyle=f,h.stroke()))});g.showList.push({type:LShape.RECT,arg:b})},drawArc:function(a,f,b,d,k){var g=this;g.setList.push(function(){var h=LGlobal.canvas;h.beginPath();6<b.length&&b[6]&&h.moveTo(b[0],b[1]);h.arc(b[0],b[1],b[2],b[3],b[4],b[5]);6<b.length&&b[6]&&h.lineTo(b[0],b[1]);g.bitmap?(h.save(),h.clip(),h.drawImage(g.bitmap.image,g.bitmap.x,g.bitmap.y,g.bitmap.width,g.bitmap.height,0,0,g.bitmap.width,g.bitmap.height),
h.restore(),g.bitmap=null):(d&&(h.fillStyle=k,h.fill()),0<a&&(h.lineWidth=a,h.strokeStyle=f,h.stroke()))});g.showList.push({type:LShape.ARC,arg:b})},drawRect:function(a,b,e,d,k){var g=this;g.setList.push(function(){var h=LGlobal.canvas;h.beginPath();h.rect(e[0],e[1],e[2],e[3]);h.closePath();g.bitmap?(h.save(),h.clip(),h.drawImage(g.bitmap.image,g.bitmap.x,g.bitmap.y,g.bitmap.width,g.bitmap.height,0,0,g.bitmap.width,g.bitmap.height),h.restore(),g.bitmap=null):(d&&(h.fillStyle=k,h.fill()),0<a&&(h.lineWidth=
a,h.strokeStyle=b,h.stroke()))});g.showList.push({type:LShape.RECT,arg:e})},drawRoundRect:function(a,b,e,d,k){var g=this;g.setList.push(function(){var h=LGlobal.canvas;h.beginPath();h.moveTo(e[0]+e[4],e[1]);h.lineTo(e[0]+e[2]-e[4],e[1]);h.arcTo(e[0]+e[2],e[1],e[0]+e[2],e[1]+e[4],e[4]);h.lineTo(e[0]+e[2],e[1]+e[3]-e[4]);h.arcTo(e[0]+e[2],e[1]+e[3],e[0]+e[2]-e[4],e[1]+e[3],e[4]);h.lineTo(e[0]+e[4],e[1]+e[3]);h.arcTo(e[0],e[1]+e[3],e[0],e[1]+e[3]-e[4],e[4]);h.lineTo(e[0],e[1]+e[4]);h.arcTo(e[0],e[1],
e[0]+e[4],e[1],e[4]);h.closePath();g.bitmap?(h.save(),h.clip(),h.drawImage(g.bitmap.image,0,0,g.bitmap.width,g.bitmap.height,0,0,g.bitmap.width,g.bitmap.height),h.restore(),g.bitmap=null):(d&&(h.fillStyle=k,h.fill()),0<a&&(h.lineWidth=a,h.strokeStyle=b,h.stroke()))});g.showList.push({type:LShape.RECT,arg:e})},drawVertices:function(a,b,e,d,k){var g=this;3>e.length||(g.setList.push(function(){var h=LGlobal.canvas;h.beginPath();h.moveTo(e[0][0],e[0][1]);var n,r=e.length,p;for(n=1;n<r;n++)p=e[n],h.lineTo(p[0],
p[1]);h.lineTo(e[0][0],e[0][1]);h.closePath();g.bitmap?(h.save(),h.clip(),h.drawImage(g.bitmap.image,g.bitmap.x,g.bitmap.y,g.bitmap.width,g.bitmap.height,0,0,g.bitmap.width,g.bitmap.height),h.restore(),g.bitmap=null):(d&&(h.fillStyle=k,h.fill()),0<a&&(h.lineWidth=a,h.strokeStyle=b,h.closePath(),h.stroke()))}),g.showList.push({type:LShape.VERTICES,arg:e}))},drawTriangles:function(a,b,e,d,k){var g=this,h,n,r=b.length,p;g.setList.push(function(){p=LGlobal.canvas;var q;for(n=h=0;h<r;h+=3){p.save();p.beginPath();
p.moveTo(a[2*b[h]],a[2*b[h]+1]);p.lineTo(a[2*b[h+1]],a[2*b[h+1]+1]);p.lineTo(a[2*b[h+2]],a[2*b[h+2]+1]);p.lineTo(a[2*b[h]],a[2*b[h]+1]);p.closePath();d&&(p.lineWidth=d,p.strokeStyle=k,p.stroke());p.clip();if(0==h%6){var t=(e[2*b[h+1+n]]-e[2*b[h+n]])*g.bitmap.width,x=(e[2*b[h+2]+1]-e[2*b[h]+1])*g.bitmap.height;if(0==n&&0>t){for(q=h+9;q<r;q+=3)if(e[2*b[h+2]+1]==e[2*b[q+2]+1]){n=q-h;break}0==n&&(n=r-h);t=(e[2*b[h+1+n]]-e[2*b[h+n]])*g.bitmap.width}h+n>=r?(t=(e[2*b[h+n-r]]-e[2*b[h+1]])*g.bitmap.width,
q=1==e[2*b[h]]?0:g.bitmap.width*e[2*b[h]]+t,q>g.bitmap.width&&(q-=g.bitmap.width)):q=g.bitmap.width*e[2*b[h+n]];sh=g.bitmap.height*e[2*b[h]+1];0>x&&(x=(e[2*b[h+2-(0<h?6:-6)]+1]-e[2*b[h-(0<h?6:-6)]+1])*g.bitmap.height,sh=0);var y=(a[2*b[h+1]]-a[2*b[h]])/t,z=(a[2*b[h+1]+1]-a[2*b[h]+1])/t,A=(a[2*b[h+2]]-a[2*b[h]])/x,B=(a[2*b[h+2]+1]-a[2*b[h]+1])/x;p.transform(y,z,A,B,a[2*b[h]],a[2*b[h]+1]);p.drawImage(g.bitmap.image,g.bitmap.x+q,g.bitmap.y+sh,t,x,0,0,t,x)}else{t=(e[2*b[h+2+n]]-e[2*b[h+1+n]])*g.bitmap.width;
x=(e[2*b[h+2]+1]-e[2*b[h]+1])*g.bitmap.height;if(0==n&&0>t){for(q=h+9;q<r;q+=3)if(e[2*b[h+2]+1]==e[2*b[q+2]+1]){n=q-h;break}0==n&&(n=r-h);t=(e[2*b[h+2+n]]-e[2*b[h+1+n]])*g.bitmap.width}h+1+n>=r?(t=(e[2*b[h+1+n-r]]-e[2*b[h+2]])*g.bitmap.width,q=1==e[2*b[h+1]]?0:g.bitmap.width*e[2*b[h+1]]+t,q>g.bitmap.width&&(q-=g.bitmap.width)):q=g.bitmap.width*e[2*b[h+1+n]];sh=g.bitmap.height*e[2*b[h]+1];0>x&&(x=(e[2*b[h+2-(0<h?6:-6)]+1]-e[2*b[h-(0<h?6:-6)]+1])*g.bitmap.height,sh=0);y=(a[2*b[h+2]]-a[2*b[h+1]])/t;
z=(a[2*b[h+2]+1]-a[2*b[h+1]+1])/t;A=(a[2*b[h+2]]-a[2*b[h]])/x;B=(a[2*b[h+2]+1]-a[2*b[h]+1])/x;p.transform(y,z,A,B,a[2*b[h+1]],a[2*b[h+1]+1]);p.drawImage(g.bitmap.image,g.bitmap.x+q,g.bitmap.y+sh,t,x,0,-x,t,x)}p.restore()}})},drawLine:function(a,b,e){this.setList.push(function(){var d=LGlobal.canvas;d.beginPath();d.moveTo(e[0],e[1]);d.lineTo(e[2],e[3]);d.lineWidth=a;d.strokeStyle=b;d.closePath();d.stroke()});this.showList.push({type:LShape.LINE,arg:e})},add:function(a){this.setList.push(a)},ismouseon:function(a,
b){return null!=a&&a!=UNDEFINED&&0!=this.showList.length&&this.parent?this.parent.ismouseonShapes(this.showList,a.offsetX,a.offsetY):!1},getWidth:function(){var a,b,e,d,k,g,h;a=0;for(g=this.showList.length;a<g;a++)if(this.showList[a].type==LShape.RECT){if(e>this.showList[a].arg[0]||typeof e==UNDEFINED)e=this.showList[a].arg[0];if(d<this.showList[a].arg[0]+this.showList[a].arg[2]||typeof d==UNDEFINED)d=this.showList[a].arg[0]+this.showList[a].arg[2]}else if(this.showList[a].type==LShape.ARC){if(e>
this.showList[a].arg[0]-this.showList[a].arg[2]||typeof e==UNDEFINED)e=this.showList[a].arg[0]-this.showList[a].arg[2];if(d<this.showList[a].arg[0]+this.showList[a].arg[2]||typeof d==UNDEFINED)d=this.showList[a].arg[0]+this.showList[a].arg[2]}else if(this.showList[a].type==LShape.VERTICES)for(b=0,h=this.showList[a].arg.length;b<h;b++){k=this.showList[a].arg[b];if(e>k[0]||typeof e==UNDEFINED)e=k[0];if(d<k[0]||typeof d==UNDEFINED)d=k[0]}else if(this.showList[a].type==LShape.LINE){if(e>this.showList[a].arg[0]||
typeof e==UNDEFINED)e=this.showList[a].arg[0];if(e>this.showList[a].arg[2]||typeof e==UNDEFINED)e=this.showList[a].arg[2];if(d<this.showList[a].arg[0]||typeof d==UNDEFINED)d=this.showList[a].arg[0];if(d<this.showList[a].arg[2]||typeof d==UNDEFINED)d=this.showList[a].arg[2]}else if(this.showList[a].type==LShape.POINT){if(e>this.showList[a].arg[0]||typeof e==UNDEFINED)e=this.showList[a].arg[0];if(d<this.showList[a].arg[0]||typeof d==UNDEFINED)d=this.showList[a].arg[0]}typeof e==UNDEFINED&&(e=d=0);this.left=
e;0<g&&d==e&&(d=e+1);return d-e},getHeight:function(){var a=null,b=null,e,d,k,g,h,a=0;for(e=this.showList.length;a<e;a++)if(this.showList[a].type==LShape.RECT){if(k>this.showList[a].arg[1]||typeof k==UNDEFINED)k=this.showList[a].arg[1];if(g<this.showList[a].arg[1]+this.showList[a].arg[3]||typeof g==UNDEFINED)g=this.showList[a].arg[1]+this.showList[a].arg[3]}else if(this.showList[a].type==LShape.ARC){if(k>this.showList[a].arg[1]-this.showList[a].arg[2]||typeof k==UNDEFINED)k=this.showList[a].arg[1]-
this.showList[a].arg[2];if(g<this.showList[a].arg[1]+this.showList[a].arg[2]||typeof g==UNDEFINED)g=this.showList[a].arg[1]+this.showList[a].arg[2]}else if(this.showList[a].type==LShape.VERTICES)for(b=0,d=this.showList[a].arg.length;b<d;b++){h=this.showList[a].arg[b];if(k>h[1]||typeof k==UNDEFINED)k=h[1];if(g<h[1]||typeof g==UNDEFINED)g=h[1]}else if(this.showList[a].type==LShape.LINE){if(k>this.showList[a].arg[1]||typeof k==UNDEFINED)k=this.showList[a].arg[1];if(k>this.showList[a].arg[3]||typeof k==
UNDEFINED)k=this.showList[a].arg[3];if(g<this.showList[a].arg[1]||typeof g==UNDEFINED)g=this.showList[a].arg[1];if(g<this.showList[a].arg[3]||typeof g==UNDEFINED)g=this.showList[a].arg[3]}else if(this.showList[a].type==LShape.POINT){if(k>this.showList[a].arg[1]||typeof k==UNDEFINED)k=this.showList[a].arg[1];if(g<this.showList[a].arg[1]||typeof g==UNDEFINED)g=this.showList[a].arg[1]}typeof k==UNDEFINED&&(k=g=0);this.top=k;0<e&&g==k&&(g=k+1);return g-k},startX:function(){this.getWidth();return this.left},
startY:function(){this.getHeight();return this.top}},b;for(b in d)a.prototype[b]=d[b];return a}(),LShape=function(){function a(){LExtends(this,LInteractiveObject,[]);this.type="LShape";this.graphics=new LGraphics;this.graphics.parent=this}a.POINT="point";a.LINE="line";a.ARC="arc";a.RECT="rect";a.VERTICES="vertices";var d={_ll_show:function(a){this.graphics.ll_show()},getWidth:function(a){var b,e=this.graphics.startX(),d=e+this.graphics.getWidth();a&&this.mask&&(a=this.mask._startX?this.mask._startX():
this.mask.startX(),b=this.mask.getWidth(),e<a&&(e=a),d>a+b&&(d=a+b));this.ll_left=this.x+e;this.ll_right=this.x+d;return(d-e)*this.scaleX},getHeight:function(a){var b,e=this.graphics.startY(),d=e+this.graphics.getHeight();a&&this.mask&&(a=this.mask._startY?this.mask._startY():this.mask.startY(),b=this.mask.getHeight(),e<a&&(e=a),d>a+b&&(d=a+b));this.ll_top=this.y+e;this.ll_bottom=this.y+d;return(d-e)*this.scaleY},_startX:function(){this.getWidth();return this.ll_left},startX:function(){return this._startX()*
this.scaleX},_startY:function(){this.getHeight();return this.ll_top},startY:function(){return this._startY()*this.scaleY},clone:function(){var c=new a;c.copyProperty(this);c.graphics=this.graphics.clone();return c.graphics.parent=c},ismouseon:function(a,b){var e=!1,d;if(!this.visible||null==a||this.mask&&(this.mask.parent||(this.mask.parent=this.parent),!this.mask.ismouseon(a,b)))return!1;d={x:this.x*b.scaleX+b.x,y:this.y*b.scaleY+b.y,scaleX:b.scaleX*this.scaleX,scaleY:b.scaleY*this.scaleY};this.graphics&&
(e=this.graphics.ismouseon(a,d));return e},die:function(){this.graphics.clear()}},b;for(b in d)a.prototype[b]=d[b];return a}(),LSprite=function(){function a(){LExtends(this,LDisplayObjectContainer,[]);this.type="LSprite";this.rotatex;this.rotatey;this.graphics=new LGraphics;this.graphics.parent=this;this.box2dBody=null;this.shapes=[]}var d={setRotate:function(a){this.box2dBody?this.box2dBody.SetAngle(a):this.rotate=a},_rotateReady:function(){this.box2dBody&&(typeof this.rotatex==UNDEFINED&&this.getRotateXY(),
this.x=this.box2dBody.GetPosition().x*LGlobal.box2d.drawScale-this.parent.x-this.rotatex,this.y=this.box2dBody.GetPosition().y*LGlobal.box2d.drawScale-this.parent.y-this.rotatey,this.rotate=this.box2dBody.GetAngle())},_ll_show:function(a){this.graphics.ll_show();LGlobal.show(this.childList);this._ll_debugShape()},startDrag:function(a){this.ll_dragStart||(this.ll_touchPointID=a,this.ll_dragStartX=this.x,this.ll_dragStartY=this.y,this.ll_dragMX=mouseX,this.ll_dragMY=mouseY,this.ll_dragStart=!0,LGlobal.dragList.push(this))},
stopDrag:function(){var a,b;a=0;for(b=LGlobal.dragList.length;a<b;a++)if(this.objectIndex==LGlobal.dragList[a].objectIndex){this.ll_dragStart=!1;LGlobal.dragList.splice(a,1);break}},getRotateXY:function(a,b){a&&b||(a=this.getWidth(),b=this.getHeight());this.rotatex=a/2;this.rotatey=b/2},getWidth:function(a){var b,e,d,k,g=this.graphics.startX(),h=g+this.graphics.getWidth();b=0;for(e=this.childList.length;b<e;b++)d=this.childList[b],typeof d.visible!=UNDEFINED&&d.visible&&(k=d.x,"function"==typeof d._startX&&
(k=d._startX()),d=k+d.getWidth(a),k<g&&(g=k),d>h&&(h=d));a&&this.mask&&(a=this.mask._startX?this.mask._startX():this.mask.startX(),b=this.mask.getWidth(),g<a&&(g=a),h>a+b&&(h=a+b));this.ll_left=this.x+g;this.ll_right=this.x+h;return(h-g)*this.scaleX},getHeight:function(a){var b,e,d,k,g=this.graphics.startY(),h=g+this.graphics.getHeight();b=0;for(e=this.childList.length;b<e;b++)d=this.childList[b],typeof d.visible!=UNDEFINED&&d.visible&&(k=d.y,"function"==typeof d._startY&&(k=d._startY()),d=k+d.getHeight(a),
k<g&&(g=k),d>h&&(h=d));a&&this.mask&&(a=this.mask._startY?this.mask._startY():this.mask.startY(),b=this.mask.getHeight(),g<a&&(g=a),h>a+b&&(h=a+b));this.ll_top=this.y+g;this.ll_bottom=this.y+h;return(h-g)*this.scaleY},_startX:function(){this.getWidth();return this.ll_left},startX:function(){return this._startX()*this.scaleX},_startY:function(){this.getHeight();return this.ll_top},startY:function(){return this._startY()*this.scaleY},_ll_loopframe:function(){this.dispatchEvent(LEvent.ENTER_FRAME)},
clone:function(){var c=new a,b,e,d;c.copyProperty(this);c.graphics=this.graphics.clone();c.graphics.parent=c;e=c.childList.length=0;for(d=this.childList.length;e<d;e++)b=this.childList[e],b.clone&&(b=b.clone(),b.parent=c,c.childList.push(b));return c},_mevent:function(a){var b;for(b=0;b<this.mouseList.length;b++)if(this.mouseList[b].type==a)return!0;return!1},ll_dispatchMouseEvent:function(a,d,e,m,k){for(b=0;b<this.mouseList.length;b++){var g=this.mouseList[b];g.type==a&&(d.selfX=(m-(this.x*e.scaleX+
e.x))/(e.scaleX*this.scaleX),d.selfY=(k-(this.y*e.scaleY+e.y))/(e.scaleY*this.scaleY),d.currentTarget=d.clickTarget=this,d.target||(d.target=this),g.listener(d,this))}},ll_mouseout:function(a,b,e,d,k){if(b==LMouseEvent.MOUSE_MOVE&&this.ll_mousein&&(this.ll_mousein=!1,this._mevent(LMouseEvent.MOUSE_OUT)&&this.ll_dispatchMouseEvent(LMouseEvent.MOUSE_OUT,a,e,d,k),this.mouseChildren))for(var g=this.childList.length-1;0<=g;g--)this.childList[g].mouseEvent&&this.childList[g].ll_mouseout&&this.childList[g].ll_mouseout(a,
b,e,d,k)},mouseEvent:function(a,b,e){if(!a)return!1;var d,k,g=a.offsetX,h=a.offsetY,n;if(!this.mouseEnabled||!this.visible)return!1;null==e&&(e={x:0,y:0,scaleX:1,scaleY:1});if(this.ismouseon(a,e)){b!=LMouseEvent.MOUSE_MOVE||this.ll_mousein||(this.ll_mousein=!0,this._mevent(LMouseEvent.MOUSE_OVER)&&this.ll_dispatchMouseEvent(LMouseEvent.MOUSE_OVER,a,e,g,h));if(this.mouseChildren){n={x:this.x*e.scaleX+e.x,y:this.y*e.scaleY+e.y,scaleX:e.scaleX*this.scaleX,scaleY:e.scaleY*this.scaleY};for(k=this.childList.length-
1;0<=k&&(!this.childList[k].mouseEvent||!(d=this.childList[k].mouseEvent(a,b,n))||(a.target=this.childList[k],b==LMouseEvent.MOUSE_MOVE));k--);this._mevent(b)&&this.ll_dispatchMouseEvent(b,a,e,g,h)}return!0}this.ll_mouseout(a,b,e,g,h);return!1},hitTestPoint:function(a,b){var d=this.shapes;d&&0!=d.length||(this.getWidth(),this.getHeight(),d=[{type:LShape.RECT,arg:[this.ll_left-this.x,this.ll_top-this.y,this.ll_right-this.ll_left,this.ll_bottom-this.ll_top]}]);return this.ismouseonShapes(d,a,b)},hitTestObject:function(a){var b=
this.shapes,d=a.shapes,m,k,g,h,n,r,p,q;b&&0!=b.length||(this.getWidth(),this.getHeight(),b=[{type:LShape.RECT,arg:[this.ll_left-this.x,this.ll_top-this.y,this.ll_right-this.ll_left,this.ll_bottom-this.ll_top]}]);d&&0!=d.length||(a.getWidth(),a.getHeight(),d=[{type:LShape.RECT,arg:[a.ll_left-a.x,a.ll_top-a.y,a.ll_right-a.ll_left,a.ll_bottom-a.ll_top]}]);m=this.getRootMatrix();k=a.getRootMatrix();for(g=b.length-1;0<=g;g--)for(h=b[g],q=this._changeShape(h.type,h.arg,m),n=d.length-1;0<=n;n--)if(r=d[n],
p=a._changeShape(r.type,r.arg,k),h.type==LShape.VERTICES||h.type==LShape.RECT)if(r.type==LShape.VERTICES||r.type==LShape.RECT){if(LGlobal.hitTestPolygon(q,p))return!0}else{if(r.type==LShape.ARC&&LGlobal.hitTestPolygonArc(q,p))return!0}else if(r.type==LShape.VERTICES||r.type==LShape.RECT){if(LGlobal.hitTestPolygonArc(p,q))return!0}else if(r.type==LShape.ARC&&Math.sqrt((q[0]-p[0])*(q[0]-p[0])+(q[1]-p[1])*(q[1]-p[1]))<q[2]+p[2])return!0;return!1},addShape:function(a,b){a==LShape.VERTICES&&3>b.length||
this.shapes.push({type:a,arg:b})},clearShape:function(){this.shapes.length=0},_ll_debugShape:function(){var a,b,d,m,k,g;if(LGlobal.traceDebug&&0!=this.shapes.length)for(a=0,b=this.shapes.length;a<b;a++){d=this.shapes[a];m=LGlobal.canvas;k=d.arg;m.beginPath();if(d.type==LShape.RECT)m.rect(k[0],k[1],k[2],k[3]);else if(d.type==LShape.ARC)m.arc(k[0],k[1],k[2],0,2*Math.PI);else if(d.type==LShape.VERTICES){m.moveTo(k[0][0],k[0][1]);d=1;for(g=k.length;d<g;d++)m.lineTo(k[d][0],k[d][1]);m.lineTo(k[0][0],k[0][1])}m.closePath();
m.strokeStyle="#00FF00";m.stroke()}},ismouseon:function(a,b){if(!this.visible||null==a||this.mask&&(this.mask.parent||(this.mask.parent=this.parent),!this.mask.ismouseon(a,b)))return!1;if(this.shapes&&0<this.shapes.length)return this.ismouseonShapes(this.shapes,a.offsetX,a.offsetY);var d,m=!1,k=this.childList,g={x:this.x*b.scaleX+b.x,y:this.y*b.scaleY+b.y,scaleX:b.scaleX*this.scaleX,scaleY:b.scaleY*this.scaleY};this.graphics&&(m=this.graphics.ismouseon(a,g));if(!m)for(d=k.length-1;0<=d;d--)if(k[d].ismouseon&&
(m=k[d].ismouseon(a,g)),m){a.target=this.childList[d];break}return m},die:function(){var a,b,d;this.graphics.clear();this.removeAllEventListener();this.stopDrag();this.box2dBody&&this.clearBody();a=0;b=this.childList;for(d=b.length;a<d;a++)b[a].die&&b[a].die()}},b;for(b in d)a.prototype[b]=d[b];return a}(),LButton=function(){function a(c,b,d,m){LExtends(this,LSprite,[]);this.type="LButton";this.addChild(c);b?this.addChild(b):b=c;d?this.addChild(d):d=b;m?this.addChild(m):m=c;this.upState=this.bitmap_up=
c;this.overState=this.bitmap_over=b;this.downState=d;this.disableState=m;this._ll_down_sx=this.downState.scaleX;this._ll_down_sy=this.downState.scaleY;this.overState.visible=!1;this.downState.visible=!1;this.buttonMode=this.upState.visible=!0;this.staticMode=!1;this._ll_cursorEnabled=!0;this.setState(a.STATE_ENABLE);LMouseEventContainer.container[LMouseEvent.MOUSE_MOVE]&&LMouseEventContainer.pushButton(this);this.addEventListener(LMouseEvent.MOUSE_DOWN,this.ll_modeDown)}a.STATE_DISABLE="disable";
a.STATE_ENABLE="enable";var d={setState:function(c){if(c==a.STATE_DISABLE)this.upState.visible=!1,this.overState.visible=!1,this.downState.visible=!1,this.disableState.visible=!0,this.mouseEnabled=!1;else if(c==a.STATE_ENABLE)this.overState.visible=!1,this.downState.visible=!1,this.disableState.visible=!1,this.mouseEnabled=this.upState.visible=!0;else return;this.state=c},ll_mouseout:function(a,b,d,m,k){this.ll_mousein&&(a.clickTarget=this,this.ll_modeOut(a),this.ll_mousein=!1)},mouseEvent:function(a,
b,d){if(!a)return!1;b==LMouseEvent.MOUSE_MOVE&&this.ll_button_mode&&this.ll_button_mode(a);return this.callParent("mouseEvent",arguments)},ll_button_mode:function(a){this.visible&&(a.clickTarget=this,this.hitTestPoint(a.offsetX,a.offsetY)?this.ll_modeOver(a):this.ll_modeOut(a))},ll_modeDown:function(c){c=c.clickTarget;var b,d,m,k,g;c.buttonMode&&!c.tween&&(c.state==a.STATE_DISABLE?(c.upState.visible=!1,c.overState.visible=!1,c.downState.visible=!1,c.disableState.visible=!0):(c.upState.visible=!1,
c.overState.visible=!1,c.downState.visible=!0,c._tweenOver=c.ll_modeOver,g=function(a){a=a.parent;delete a.tween;a._tweenOver({clickTarget:a});delete a._tweenOver},c.staticMode?c.tween=LTweenLiteTimeline.to(c.downState,.3,{}).to(c.downState,.1,{onComplete:g}):(b=c.downState.getWidth(),d=c.downState.getHeight(),m=c.downState.x,k=c.downState.y,b=m+.5*(b-1.1*b),d=k+.5*(d-1.1*d),c.tween=LTweenLiteTimeline.to(c.downState,.3,{x:b,y:d,scaleX:1.1*c._ll_down_sx,scaleY:1.1*c._ll_down_sy,ease:Quart.easeOut}).to(c.downState,
.1,{x:m,y:k,scaleX:c._ll_down_sx,scaleY:c._ll_down_sy,ease:Quart.easeOut,onComplete:g}))))},ll_modeOver:function(c){c=c.clickTarget;c.buttonMode&&(c.tween?c._tweenOver=c.ll_modeOver:c.state==a.STATE_DISABLE?(c.upState.visible=!1,c.overState.visible=!1,c.downState.visible=!1,c.disableState.visible=!0):(c.upState.visible=!1,c.downState.visible=!1,c.overState.visible=!0,LGlobal.os==OS_PC&&c._ll_cursorEnabled&&c.parent&&(LGlobal.cursor="pointer")))},ll_modeOut:function(c){c=c.clickTarget;c.buttonMode&&
(c.tween?c._tweenOver=c.ll_modeOut:c.state==a.STATE_DISABLE?(c.upState.visible=!1,c.overState.visible=!1,c.downState.visible=!1,c.disableState.visible=!0):(c.overState.visible=!1,c.downState.visible=!1,c.upState.visible=!0))},setCursorEnabled:function(a){this._ll_cursorEnabled=a},clone:function(){return new a(this.upState.clone(),this.overState.clone(),this.downState.clone(),this.disableState.clone())},die:function(){LMouseEventContainer.container[LMouseEvent.MOUSE_MOVE]&&LMouseEventContainer.removeButton(this);
this.callParent("die",arguments)}},b;for(b in d)a.prototype[b]=d[b];return a}();function LBlendMode(){throw"LBlendMode cannot be instantiated";}LBlendMode.SOURCE_OVER="source-over";LBlendMode.SOURCE_ATOP="source-atop";LBlendMode.SOURCE_IN="source-in";LBlendMode.SOURCE_OUT="source-out";LBlendMode.DESTINATION_OVER="destination-over";LBlendMode.DESTINATION_ATOP="destination-atop";LBlendMode.DESTINATION_IN="destination-in";LBlendMode.DESTINATION_OUT="destination-out";LBlendMode.LIGHTER="lighter";
LBlendMode.COPY="copy";LBlendMode.XOR="xor";LBlendMode.NONE=null;LBlendMode.NORMAL=null;var LTextFieldType=function(){throw"LTextFieldType cannot be instantiated";};LTextFieldType.INPUT="input";LTextFieldType.DYNAMIC=null;
var LTextField=function(){function a(){LExtends(this,LInteractiveObject,[]);this.type="LTextField";this.texttype=null;this.text="";this.font="Arial";this.size="11";this.color="#000000";this.weight="normal";this.textAlign="left";this.textBaseline="top";this.heightMode=a.HEIGHT_MODE_BOTTOM;this.stroke=!1;this.lineWidth=1;this.lineColor="#000000";this.width=150;this.height=this.size;this.multiline=this.wordWrap=this.displayAsPassword=!1;this.numLines=1;this.speed=0;this._speedIndex=100}a.HEIGHT_MODE_BOTTOM=
"bottom";a.HEIGHT_MODE_BASELINE="baseline";var d={_showReady:function(a){a.font=this.weight+" "+this.size+"pt "+this.font;a.textAlign=this.textAlign;a.textBaseline=this.textBaseline},_ll_show:function(a){var b,d,m,k,g,h,n;if(this.texttype==LTextFieldType.INPUT&&(this.inputBackLayer.ll_show(),b=this.getRootCoordinate(),LGlobal.inputBox.name=="input"+this.objectIndex&&(LGlobal.inputBox.style.marginTop=parseInt(LGlobal.canvasObj.style.marginTop)+((b.y+this.inputBackLayer.startY())*parseInt(LGlobal.canvasObj.style.height)/
LGlobal.canvasObj.height>>>0)+"px",LGlobal.inputBox.style.marginLeft=parseInt(LGlobal.canvasObj.style.marginLeft)+((b.x+this.inputBackLayer.startX())*parseInt(LGlobal.canvasObj.style.width)/LGlobal.canvasObj.width>>>0)+"px"),LGlobal.inputTextField&&LGlobal.inputTextField.objectIndex==this.objectIndex))return;b=this.text;if(this.displayAsPassword)for(b="",d=0,k=this.text.length;d<k;d++)b+="*";a.fillStyle=this.color;this.stroke&&(a.strokeStyle=this.lineColor,a.lineWidth=this.lineWidth+1);if(this.wordWrap||
this.multiline){d=h=g=m=0;for(k=this.text.length;d<k;d++){if(n=/(?:\r\n|\r|\n|\u00a5n)/.exec(b.substr(d,1)))m=0,g=d+1,h++;n||(this.stroke&&a.strokeText(b.substr(d,1),m,h*this.wordHeight),a.fillText(b.substr(d,1),m,h*this.wordHeight));this.numLines=h;m=a.measureText(this.text.substr(g,d+1-g)).width;this.wordWrap&&m+a.measureText(b.substr(d,1)).width>this.width&&(m=0,g=d+1,h++)}this.height=(h+1)*this.wordHeight}else this.numLines=1,this.stroke&&a.strokeText(b,0,0,a.measureText(b).width),a.fillText(b,
0,0,a.measureText(b).width);this.windRunning&&this._ll_windRun()},_wordHeight:function(a){0<a?this.wordHeight=a:(this.wordWrap=!1,this.wordHeight=this.getHeight());this.height=0},setMultiline:function(a,b){a&&this._wordHeight(b);this.multiline=a},setWordWrap:function(a,b){a&&this._wordHeight(b);this.wordWrap=a},setType:function(a,b){this.texttype!=a&&a==LTextFieldType.INPUT?(null==b||"LSprite"!=b.type?(this.inputBackLayer=new LSprite,this.inputBackLayer.graphics.drawRect(1,"#000000",[0,.4*-this.getHeight(),
this.width,1.5*this.getHeight()])):this.inputBackLayer=b,this.inputBackLayer.parent=this,LMouseEventContainer.container[LMouseEvent.MOUSE_DOWN]&&LMouseEventContainer.pushInputBox(this)):(this.inputBackLayer=null,LMouseEventContainer.removeInputBox(this));this.texttype=a},ismouseon:function(a,b){if(!a||!this.visible)return!1;b||(b={x:0,y:0,scaleX:1,scaleY:1});return this.mask&&(this.mask.parent||(this.mask.parent=this.parent),!this.mask.ismouseon(a,b))?!1:this.inputBackLayer?this.inputBackLayer.ismouseon(a,
{x:this.x*b.scaleX+b.x,y:this.y*b.scaleY+b.y,scaleX:b.scaleX*this.scaleX,scaleY:b.scaleY*this.scaleY}):this.ismouseonShapes([{type:LShape.RECT,arg:[0,0,this._getWidth(),this._getHeight()]}],a.offsetX,a.offsetY)},clone:function(){var a=new this.constructor;a.copyProperty(this);a.texttype=null;this.texttype==LTextFieldType.INPUT&&a.setType(LTextFieldType.INPUT);return a},mouseEvent:function(a,b,d){null!=this.inputBackLayer&&(a=this.ismouseon(a,d),b==LMouseEvent.MOUSE_DOWN&&a&&this.focus())},_ll_getValue:function(){LGlobal.inputBox.style.display!=
NONE&&(LGlobal.inputTextField.text=LGlobal.inputTextBox.value,LEvent.removeEventListener(LGlobal.inputTextBox,LKeyboardEvent.KEY_DOWN,LGlobal.inputTextField._ll_input),LGlobal.inputBox.style.display=NONE,LGlobal.inputTextField.dispatchEvent(LFocusEvent.FOCUS_OUT),LGlobal.inputTextField=null)},updateInput:function(){this.texttype==LTextFieldType.INPUT&&LGlobal.inputTextField.objectIndex==this.objectIndex&&(LGlobal.inputTextBox.value=LGlobal.inputTextField.text)},_ll_input:function(a){var b=new LEvent(LTextEvent.TEXT_INPUT);
b.keyCode=a.keyCode;LGlobal.inputTextField.text=LGlobal.inputTextBox.value;LGlobal.inputTextField.hasEventListener(LTextEvent.TEXT_INPUT)?a.returnValue=LGlobal.inputTextField.dispatchEvent(b):a.returnValue=!0},focus:function(){var a,b;this.parent&&this.texttype==LTextFieldType.INPUT&&(LGlobal.inputTextField&&LGlobal.inputTextField.objectIndex!=this.objectIndex&&this._ll_getValue(),this.dispatchEvent(LFocusEvent.FOCUS_IN),a=this.getAbsoluteScale(),LGlobal.inputBox.style.display="",LGlobal.inputBox.name=
"input"+this.objectIndex,LGlobal.inputTextField=this,LGlobal.inputTextareaBoxObj.style.display=NONE,LGlobal.inputTextBoxObj.style.display=NONE,LGlobal.passwordBoxObj.style.display=NONE,LGlobal.inputTextBox=this.displayAsPassword?LGlobal.passwordBoxObj:this.multiline?LGlobal.inputTextareaBoxObj:LGlobal.inputTextBoxObj,b=parseInt(LGlobal.canvasObj.style.width)/LGlobal.canvasObj.width,sy=parseInt(LGlobal.canvasObj.style.height)/LGlobal.canvasObj.height,LGlobal.inputTextBox.style.display="",LGlobal.inputTextBox.value=
this.text,LGlobal.inputTextBox.style.height=this.inputBackLayer.getHeight()*a.scaleY*this.scaleY*sy+"px",LGlobal.inputTextBox.style.width=this.inputBackLayer.getWidth()*a.scaleX*this.scaleX*b+"px",LGlobal.inputTextBox.style.color=this.color,LGlobal.inputTextBox.style.fontSize=(this.size*parseFloat(LGlobal.canvasObj.style.height)/LGlobal.canvasObj.height>>0)+"px",LGlobal.inputTextBox.style.fontFamily=this.font,LEvent.addEventListener(LGlobal.inputTextBox,LKeyboardEvent.KEY_DOWN,LGlobal.inputTextField._ll_input),
this.texttype==LTextFieldType.INPUT&&(rc=this.getRootCoordinate(),LGlobal.inputBox.name=="input"+this.objectIndex&&(LGlobal.inputBox.style.marginTop=parseInt(LGlobal.canvasObj.style.marginTop)+((rc.y+this.inputBackLayer.startY())*parseInt(LGlobal.canvasObj.style.height)/LGlobal.canvasObj.height>>>0)+"px",LGlobal.inputBox.style.marginLeft=parseInt(LGlobal.canvasObj.style.marginLeft)+((rc.x+this.inputBackLayer.startX())*parseInt(LGlobal.canvasObj.style.width)/LGlobal.canvasObj.width>>>0)+"px")),setTimeout(function(){LGlobal.inputTextBox.focus()},
0))},_getWidth:function(){if(this.wordWrap)return this.width;LGlobal.canvas.font=this.size+"pt "+this.font;return LGlobal.canvas.measureText(this.text).width},getWidth:function(a){var b,d;b=this._getWidth()*this.scaleX;if(a&&this.mask){a=this.mask._startX?this.mask._startX():this.mask.startX();if(a>b)return 0;d=this.mask.getWidth();return a+d>b?b-a:d}return b},_getHeight:function(){var c=LGlobal.canvas,b,d,m,k,g,h;if(this.wordWrap){c.font=this.weight+" "+this.size+"pt "+this.font;if(0==this.height){b=
g=k=0;for(d=this.text.length;b<d;b++)if(m=c.measureText(this.text.substr(k,b-k)).width,h=/(?:\r\n|\r|\n|\u00a5n)/.exec(this.text.substr(b,1)),this.wordWrap&&m>this.width||h)k=b,g++,h&&k++;this.height=(g+1)*this.wordHeight}return this.height}c.font=this.weight+" "+this.size+"pt "+this.font;d=1.2*c.measureText("O").width;this.heightMode==a.HEIGHT_MODE_BASELINE&&(d*=1.2);return d},getHeight:function(a){var b,d;b=this._getHeight()*this.scaleY;if(a&&this.mask){a=this.mask._startY?this.mask._startY():this.mask.startY();
if(a>b)return 0;d=this.mask.getHeight();return a+d>b?b-a:d}return b},wind:function(a){this.wind_over_function=a;this.windRunning=!0;this._ll_wind_text=this.text;this.text="";this._ll_wind_length=0},_ll_windRun:function(){this._speedIndex++<this.speed||(this._speedIndex=0,this._ll_wind_length>this._ll_wind_text.length?(this.windRunning=!1,this.wind_over_function&&this.wind_over_function(),this.dispatchEvent(new LEvent(LTextEvent.WIND_COMPLETE))):(this.text=this._ll_wind_text.substring(0,this._ll_wind_length),
this._ll_wind_length++))},die:function(){LMouseEventContainer.removeInputBox(this)}},b;for(b in d)a.prototype[b]=d[b];return a}(),LBitmap=function(){function a(a){LExtends(this,LDisplayObject,[]);this.type="LBitmap";this.rotateCenter=!0;if(this.bitmapData=a)this.width=this.bitmapData.width,this.height=this.bitmapData.height}var d={_canShow:function(){return this.visible&&this.bitmapData},_rotateReady:function(){0!=this.rotate&&this.rotateCenter?(this.rotatex=.5*this.getWidth(),this.rotatey=.5*this.getHeight()):
this.rotatex=this.rotatey=0},_coordinate:function(a){},_ll_show:function(){this.ll_draw()},ll_draw:function(){LGlobal.canvas.drawImage(this.bitmapData.image,this.bitmapData.x,this.bitmapData.y,this.bitmapData.width,this.bitmapData.height,this.x,this.y,this.bitmapData.width,this.bitmapData.height)},clone:function(){var c=new a(this.bitmapData.clone());c.copyProperty(this);c.rotateCenter=this.rotateCenter;return c},ismouseon:function(a,b){return a&&this.visible&&this.bitmapData&&(!this.mask||(this.mask.parent||
(this.mask.parent=this.parent),this.mask.ismouseon(a,b)))?this.ismouseonShapes([{type:LShape.RECT,arg:[0,0,this.bitmapData.width,this.bitmapData.height]}],a.offsetX,a.offsetY):!1},getWidth:function(a){var b,d;b=null!=this.bitmapData?this.bitmapData.width*(0<this.scaleX?this.scaleX:-this.scaleX):0;if(a&&this.mask){a=this.mask._startX?this.mask._startX():this.mask.startX();if(a>b)return 0;d=this.mask.getWidth();return a+d>b?b-a:d}return b},getHeight:function(a){var b,d;b=null!=this.bitmapData?this.bitmapData.height*
(0<this.scaleY?this.scaleY:-this.scaleY):0;if(a&&this.mask){a=this.mask._startY?this.mask._startY():this.mask.startY();if(a>b)return 0;d=this.mask.getHeight();return a+d>b?b-a:d}return b},startX:function(){return this.x},startY:function(){return this.y},die:function(){}},b;for(b in d)a.prototype[b]=d[b];return a}(),LBitmapData=function(){function a(c,b,d,m,k,g){LExtends(this,LObject,[]);this.type="LBitmapData";typeof g==UNDEFINED&&(g=a.DATA_IMAGE);this.oncomplete=null;this._setPixel=this._locked=
!1;this.x=null==b?0:b;this.y=null==d?0:d;this.height=this.width=0;this.dataType=null;if(c&&"object"==typeof c)this.image=c,this.dataType=a.DATA_IMAGE,this.width=null==m?this.image.width:m,this.height=null==k?this.image.height:k,this._setDataType(g);else{this._createCanvas();this.dataType=a.DATA_CANVAS;this._canvas.width=this.width=null==m?1:m;this._canvas.height=this.height=null==k?1:k;"string"==typeof c&&(c=parseInt(c.replace("#","0x")));if("number"==typeof c){b=this._context.createImageData(this.width,
this.height);for(d=0;d<b.data.length;d+=4)b.data[d+0]=c>>16&255,b.data[d+1]=c>>8&255,b.data[d+2]=c&255,b.data[d+3]=255;this._context.putImageData(b,0,0)}this.image=this._canvas;g==a.DATA_IMAGE&&this._setDataType(g)}this.resize()}a.DATA_IMAGE="data_image";a.DATA_CANVAS="data_canvas";var d={_setDataType:function(c){this.dataType!=c&&(c==a.DATA_CANVAS?(this._createCanvas(),this._canvas.width=this.image.width,this._canvas.height=this.image.height,this._context.clearRect(0,0,this._canvas.width,this._canvas.height),
this._context.drawImage(this.image,0,0),this.image=this._canvas):c==a.DATA_IMAGE&&(this.image=new Image,this.image.width=this._canvas.width,this.image.height=this._canvas.height,this.image.src=this._canvas.toDataURL()),this.dataType=c)},_createCanvas:function(){this._canvas||(this._canvas=document.createElement("canvas"),this._context=this._canvas.getContext("2d"))},clear:function(){this._createCanvas();this._canvas.width=this.image.width;this.dataType==a.DATA_IMAGE&&(this.image.src=this._canvas.toDataURL())},
setProperties:function(a,b,d,m){this.x=a;this.y=b;this.width=d;this.height=m;this.resize()},setCoordinate:function(a,b){this.x=a;this.y=b;this.resize()},clone:function(){return new a(this.image,this.x,this.y,this.width,this.height,this.dataType)},_ready:function(){this._dataType=this.dataType;this._setDataType(a.DATA_CANVAS);this._data=this._context.getImageData(this.x,this.y,this.width,this.height)},_update:function(){this._context.putImageData(this._data,this.x,this.y,0,0,this.width,this.height);
this._setDataType(this._dataType);this._data=null},getPixel:function(a,b,d){a>>=0;b>>=0;this._locked||this._ready();a=4*this.width*b+4*a;b=this._data.data;this._locked||this._update();return"number"==d?b[a]<<16|b[a+1]<<8|b[a+2]:[b[a],b[a+1],b[a+2],b[a+3]]},setPixel:function(a,b,d){a>>=0;b>>=0;this._locked||this._ready();var m=this._data;a=4*this.width*b+4*a;"object"==typeof d?(m.data[a+0]=d[0],m.data[a+1]=d[1],m.data[a+2]=d[2],m.data[a+3]=d[3]):("string"==typeof d&&(d=parseInt(d.replace("#","0x"))),
m.data[a+0]=d>>16&255,m.data[a+1]=d>>8&255,m.data[a+2]=d&255,m.data[a+3]=255);this._locked||this._update()},getPixels:function(a){this._locked||this._ready();a=this._context.getImageData(this.x+a.x,this.y+a.y,a.width,a.height);this._locked||this._update();return a},setPixels:function(a,b){var d,m,k,g,h,n;this._locked||this._ready();k=this._data;if("object"==typeof b)for(g=this._canvas.width,h=a.x;h<a.right;h++)for(n=a.y;n<a.bottom;n++)d=4*g*(this.y+n)+4*(this.x+h),m=4*b.width*(n-a.y)+4*(h-a.x),k.data[d+
0]=b.data[m+0],k.data[d+1]=b.data[m+1],k.data[d+2]=b.data[m+2],k.data[d+3]=b.data[m+3];else for("string"==typeof b&&(b=parseInt(b.replace("#","0x"))),b=[b>>16&255,b>>8&255,b&255],g=this._canvas.width,h=a.x;h<a.right;h++)for(n=a.y;n<a.bottom;n++)d=4*g*(this.y+n)+4*(this.x+h),k.data[d+0]=b[0],k.data[d+1]=b[1],k.data[d+2]=b[2],k.data[d+3]=255;this._locked||this._update()},putPixels:function(b,d){this.dataType==a.DATA_CANVAS&&"object"==typeof d&&this._context.putImageData(d,this.x+b.x,this.y+b.y,0,0,
b.width,b.height)},lock:function(){this._locked=!0;this._ready()},unlock:function(){this._locked=!1;this._update()},draw:function(b,d,e,m,k){var g,h,n=!1,r=this.dataType;this._setDataType(a.DATA_CANVAS);if(d||e||m||k)this._context.save(),n=!0;k&&(b instanceof a?(g=b.x,h=b.y):g=h=0,b=new a(b.getDataCanvas(),g+k.x,h+k.y,k.width,k.height,a.DATA_CANVAS));g=b.getWidth()>>>0;h=b.getHeight()>>>0;0==g||0==h?this._setDataType(r):(k=b.getDataCanvas(),e&&(b.colorTransform(new LRectangle(0,0,g,h),e),k=b.image),
d&&this._context.setTransform(d.a,d.b,d.c,d.d,d.tx,d.ty),m&&(this._context.globalCompositeOperation=m),this._context.drawImage(k,b.x,b.y,g,h,0,0,g,h),n&&this._context.restore(),this._setDataType(r),this.resize())},getDataCanvas:function(){var b=this.dataType;this._setDataType(a.DATA_CANVAS);this._setDataType(b);return this._canvas},getWidth:function(){return this.width},getHeight:function(){return this.height},resize:function(){var a=this.image.width-this.x,b=this.image.height-this.y;this.width=this.width<
a?this.width:a;this.height=this.height<b?this.height:b},colorTransform:function(b,d){if(this.dataType==a.DATA_CANVAS){for(var e=this._context.getImageData(this.x+b.x,this.y+b.y,b.width,b.height),m=e.data,k=0,g=m.length;k<g;k+=4){var h=k,n=k+1,r=k+2,p=k+3;m[h]=m[h]*d.redMultiplier+d.redOffset;m[n]=m[n]*d.greenMultiplier+d.greenOffset;m[r]=m[r]*d.blueMultiplier+d.blueOffset;m[p]=m[p]*d.alphaMultiplier+d.alphaOffset}this._context.putImageData(e,this.x+b.x,this.y+b.y,0,0,b.width,b.height)}},copyPixels:function(b,
d,e){var m,k,g,h;this.dataType==a.DATA_CANVAS&&(m=b.x,k=b.y,g=b.width,h=b.height,b.setProperties(d.x+b.x,d.y+b.y,d.width,d.height),this._context.drawImage(b.image,b.x,b.y,b.width,b.height,e.x,e.y,b.width,b.height),b.x=m,b.y=k,b.width=g,b.height=h)}},b;for(b in d)a.prototype[b]=d[b];return a}(),LDropShadowFilter=function(){function a(a,b,d,m){LExtends(this,LObject,[]);this.type="LDropShadowFilter";this.distance=a?a:0;this.angle=b?b:0;this.shadowColor=d?d:"#000000";this.shadowBlur=m?m:20;this.setShadowOffset()}
var d={setShadowOffset:function(){var a=this.angle*Math.PI/180;this.shadowOffsetX=this.distance*Math.cos(a);this.shadowOffsetY=this.distance*Math.sin(a)},ll_show:function(){var a=LGlobal.canvas;a.shadowColor=this.shadowColor;a.shadowBlur=this.shadowBlur;a.shadowOffsetX=this.shadowOffsetX;a.shadowOffsetY=this.shadowOffsetY},setDistance:function(a){this.distance=a;this.setShadowOffset()},setAngle:function(a){this.angle=a;this.setShadowOffset()},setColor:function(a){this.shadowColor=a},setBlur:function(a){this.shadowBlur=
a}},b;for(b in d)a.prototype[b]=d[b];return a}(),LAnimation=function(){function a(a,b,d){LExtends(this,LSprite,[]);this.type="LAnimation";this._ll_stepIndex=this.colIndex=this.rowIndex=0;this._ll_stepArray=[];this.mode=1;this.isMirror=!1;this.bitmap=new LBitmap(b);this.imageArray=d;this.addChild(this.bitmap);null!=a&&a.addChild(this);this.onframe();this.colIndex=0}var d={setAction:function(a,b,d,m){var k=!1;null!=a&&0<=a&&a<this.imageArray.length&&(this.rowIndex=a,k=!0);null!=b&&0<=b&&b<this.imageArray[a].length&&
(this.colIndex=b,k=!0);null!=d&&(this.mode=d,k=!0);null!=m&&((this.isMirror=m)?(this.bitmap.x=this.bitmap.getWidth(),this.bitmap.scaleX=-1*Math.abs(this.bitmap.scaleX)):(this.bitmap.x=0,this.bitmap.scaleX=Math.abs(this.bitmap.scaleX)),k=!0);k&&(this._ll_stepIndex=0)},getAction:function(){return[this.rowIndex,this.colIndex,this.mode,this.isMirror]},onframe:function(){var a,b=null;this.colIndex>=this.imageArray[this.rowIndex].length&&(this.colIndex=0);a=this.imageArray[this.rowIndex][this.colIndex];
b=this._ll_stepArray[this.rowIndex]&&this._ll_stepArray[this.rowIndex][this.colIndex]?this._ll_stepArray[this.rowIndex][this.colIndex]:0;0==this._ll_stepIndex&&("function"==typeof a.script&&a.script(this,a.params),typeof a.width!=UNDEFINED&&typeof a.height!=UNDEFINED?this.bitmap.bitmapData.setProperties(a.x,a.y,a.width,a.height):this.bitmap.bitmapData.setCoordinate(a.x,a.y),typeof a.sx!=UNDEFINED&&(this.bitmap.x=a.sx),typeof a.sy!=UNDEFINED&&(this.bitmap.y=a.sy),typeof a.mirror!=UNDEFINED&&(this.bitmap.rotateCenter=
!1,a.mirror?(this.bitmap.x=this.bitmap.getWidth(),this.bitmap.scaleX=-1*Math.abs(this.bitmap.scaleX)):(this.bitmap.x=0,this.bitmap.scaleX=Math.abs(this.bitmap.scaleX))));!(this._ll_stepIndex++<b)&&(this._ll_stepIndex=0,this.colIndex+=this.mode,this.colIndex>=this.imageArray[this.rowIndex].length||0>this.colIndex)&&(this.colIndex=0<this.mode?0:this.imageArray[this.rowIndex].length-1,this.dispatchEvent(LEvent.COMPLETE))},clone:function(){var b=new a(null,this.bitmap.bitmapData,this.imageArray.slice(0));
b.copyProperty(this);b.childList.length=0;b.bitmap=this.bitmap.clone();b.addChild(b.bitmap);return b}},b;for(b in d)a.prototype[b]=d[b];return a}(),LAnimationTimeline=function(){function a(a,b){LExtends(this,LAnimation,[null,a,b]);this.type="LAnimationTimeline";this._speedIndex=this.speed=0;this.ll_labelList={};for(var d=0,m,k,g;d<b.length;d++)for(m=b[d],k=0;k<m.length;k++)g=m[k],g.label&&this.setLabel(g.label,d,k,1,g.isMirror?!0:!1);this.addEventListener(LEvent.ENTER_FRAME,this._ll_onframe)}var d=
{clone:function(){var a,b,d=new LAnimation(null,this.bitmap.bitmapData,this.imageArray.slice(0));d.copyProperty(this);d.childList.length=0;d.bitmap=this.bitmap.clone();d.addChild(d.bitmap);for(a in this.ll_labelList)b=this.ll_labelList[a],d.ll_labelList[a]={rowIndex:b.rowIndex,colIndex:b.colIndex,mode:b.mode,isMirror:b.isMirror};return d},setFrameSpeedAt:function(a,b,d){this._ll_stepArray[a]||(this._ll_stepArray[a]=[]);this._ll_stepArray[a][b]=d},_ll_onframe:function(a){a=a.target;a._ll_stop||a._speedIndex++<
a.speed||(a._speedIndex=0,a.onframe())},setLabel:function(a,b,d,m,k){this.ll_labelList[a]={rowIndex:b,colIndex:d,mode:m,isMirror:k}},play:function(){this._ll_stop=!1},stop:function(){this._ll_stop=!0},gotoAndPlay:function(a){a=this.ll_labelList[a];this.setAction(a.rowIndex,a.colIndex,a.mode,a.isMirror);this.onframe();this.play()},gotoAndStop:function(a){a=this.ll_labelList[a];this.setAction(a.rowIndex,a.colIndex,a.mode,a.isMirror);this.onframe();this.stop()},addFrameScript:function(a,b,d){a=this.ll_labelList[a];
a=this.imageArray[a.rowIndex][a.colIndex];a.script=b;a.params=d?d:null},removeFrameScript:function(a){a=this.ll_labelList[a];this.imageArray[a.rowIndex][a.colIndex].script=null}},b;for(b in d)a.prototype[b]=d[b];return a}(),LLoadManage=function(){function a(){this.llname="ll.file.";this.llload="ll.load."}a.prototype={load:function(a,b,c){this.list=a;this.onupdate=b;this.oncomplete=c;this.loader=this;this.loadIndex=this.index=0;this.result=[];this.lresult=[];this.loadInit()},loadInit:function(){this.index>=
this.list.length||(this.loadIndex=0,this.loadStart(),this.reloadtime=setTimeout(this.loadInit.bind(this),1E4))},loadStart:function(){var a,b;this.loadIndex>=this.list.length||(a=this.list[this.loadIndex],a.name||(a.name=this.llname+this.loadIndex),this.lresult[this.llload+a.name]||(a.type||(b=getExtension(a.path),"txt"==b?a.type=LURLLoader.TYPE_TEXT:"js"==b?a.type=LURLLoader.TYPE_JS:0<=["mp3","ogg","wav","m4a"].indexOf(b)&&(a.type=LSound.TYPE_SOUND)),a.type==LURLLoader.TYPE_TEXT||a.type==LURLLoader.TYPE_JS?
(this.loader=new LURLLoader,this.loader.name=a.name,this.loader.addEventListener(LEvent.COMPLETE,this.loadComplete.bind(this)),this.loader.load(this.url(a.path),a.type)):a.type==LSound.TYPE_SOUND?(this.loader=new LSound,this.loader.name=a.name,this.loader.addEventListener(LEvent.COMPLETE,this.loadComplete.bind(this)),this.loader.load(a.path)):(this.loader=new LLoader,this.loader.name=a.name,this.loader.addEventListener(LEvent.COMPLETE,this.loadComplete.bind(this)),this.loader.load(this.url(a.path),
LLoader.TYPE_BITMAPDATE))),this.loadIndex++,this.loadStart())},loadComplete:function(a){if(a&&a.currentTarget&&a.currentTarget.name){a.currentTarget.removeEventListener(LEvent.COMPLETE,this.loadComplete);0<=a.currentTarget.name.indexOf(this.llname)&&(a.target=1);if(this.lresult[this.llload+a.currentTarget.name])return;this.result[a.currentTarget.name]=a.target;this.lresult[this.llload+a.currentTarget.name]=1}this.index++;if(this.onupdate)this.onupdate(Math.floor(100*this.index/this.list.length));
this.index>=this.list.length&&(this.reloadtime&&clearTimeout(this.reloadtime),this.loader=null,a=this.result,LGlobal.forceRefresh=!0,this.oncomplete(a))},url:function(a){return LGlobal.traceDebug?a+(0<=a.indexOf("?")?"&":"?")+"t="+(new Date).getTime():a}};return new a}(),LEasing={None:{easeIn:function(a,d,b,c){return d+a*b/c},easeOut:function(a,d,b,c){return d+a*b/c},easeInOut:function(a,d,b,c){return d+a*b/c}},Quad:{easeIn:function(a,d,b,c){return b*(a/=c)*a+d},easeOut:function(a,d,b,c){return-b*
(a/=c)*(a-2)+d},easeInOut:function(a,d,b,c){return 1>(a/=c/2)?b/2*a*a+d:-b/2*(--a*(a-2)-1)+d}},Cubic:{easeIn:function(a,d,b,c){return b*(a/=c)*a*a+d},easeOut:function(a,d,b,c){return b*((a=a/c-1)*a*a+1)+d},easeInOut:function(a,d,b,c){return 1>(a/=c/2)?b/2*a*a*a+d:b/2*((a-=2)*a*a+2)+d}},Quart:{easeIn:function(a,d,b,c){return b*(a/=c)*a*a*a+d},easeOut:function(a,d,b,c){return-b*((a=a/c-1)*a*a*a-1)+d},easeInOut:function(a,d,b,c){return 1>(a/=c/2)?b/2*a*a*a*a+d:-b/2*((a-=2)*a*a*a-2)+d}},Quint:{easeIn:function(a,
d,b,c){return b*(a/=c)*a*a*a*a+d},easeOut:function(a,d,b,c){return b*((a=a/c-1)*a*a*a*a+1)+d},easeInOut:function(a,d,b,c){return 1>(a/=c/2)?b/2*a*a*a*a*a+d:b/2*((a-=2)*a*a*a*a+2)+d}},Sine:{easeIn:function(a,d,b,c){return-b*Math.cos(a/c*(Math.PI/2))+b+d},easeOut:function(a,d,b,c){return b*Math.sin(a/c*(Math.PI/2))+d},easeInOut:function(a,d,b,c){return-b/2*(Math.cos(Math.PI*a/c)-1)+d}},Strong:{easeIn:function(a,d,b,c){return b*(a/=c)*a*a*a*a+d},easeOut:function(a,d,b,c){return b*((a=a/c-1)*a*a*a*a+
1)+d},easeInOut:function(a,d,b,c){return 1>(a/=c/2)?b/2*a*a*a*a*a+d:b/2*((a-=2)*a*a*a*a+2)+d}},Expo:{easeIn:function(a,d,b,c){return 0==a?d:b*Math.pow(2,10*(a/c-1))+d},easeOut:function(a,d,b,c){return a==c?d+b:b*(-Math.pow(2,-10*a/c)+1)+d},easeInOut:function(a,d,b,c){return 0==a?d:a==c?d+b:1>(a/=c/2)?b/2*Math.pow(2,10*(a-1))+d:b/2*(-Math.pow(2,-10*--a)+2)+d}},Circ:{easeIn:function(a,d,b,c){return-b*(Math.sqrt(1-(a/=c)*a)-1)+d},easeOut:function(a,d,b,c){return b*Math.sqrt(1-(a=a/c-1)*a)+d},easeInOut:function(a,
d,b,c){return 1>(a/=c/2)?-b/2*(Math.sqrt(1-a*a)-1)+d:b/2*(Math.sqrt(1-(a-=2)*a)+1)+d}},Elastic:{easeIn:function(a,d,b,c,f,e){if(0==a)return d;if(1==(a/=c))return d+b;e||(e=.3*c);!f||f<Math.abs(b)?(f=b,b=e/4):b=e/(2*Math.PI)*Math.asin(b/f);return-(f*Math.pow(2,10*(a-=1))*Math.sin(2*(a*c-b)*Math.PI/e))+d},easeOut:function(a,d,b,c,f,e){var m;if(0==a)return d;if(1==(a/=c))return d+b;e||(e=.3*c);!f||f<Math.abs(b)?(f=b,m=e/4):m=e/(2*Math.PI)*Math.asin(b/f);return f*Math.pow(2,-10*a)*Math.sin(2*(a*c-m)*
Math.PI/e)+b+d},easeInOut:function(a,d,b,c,f,e){var m;if(0==a)return d;if(2==(a/=c/2))return d+b;e||(e=.3*c*1.5);!f||f<Math.abs(b)?(f=b,m=e/4):m=e/(2*Math.PI)*Math.asin(b/f);return 1>a?-.5*f*Math.pow(2,10*(a-=1))*Math.sin(2*(a*c-m)*Math.PI/e)+d:f*Math.pow(2,-10*(a-=1))*Math.sin(2*(a*c-m)*Math.PI/e)*.5+b+d}},Back:{easeIn:function(a,d,b,c,f){typeof f==UNDEFINED&&(f=1.70158);return b*(a/=c)*a*((f+1)*a-f)+d},easeOut:function(a,d,b,c,f){typeof f==UNDEFINED&&(f=1.70158);return b*((a=a/c-1)*a*((f+1)*a+f)+
1)+d},easeInOut:function(a,d,b,c,f){typeof f==UNDEFINED&&(f=1.70158);return 1>(a/=c/2)?b/2*a*a*(((f*=1.525)+1)*a-f)+d:b/2*((a-=2)*a*(((f*=1.525)+1)*a+f)+2)+d}},Bounce:{easeIn:function(a,d,b,c){return b-LEasing.Bounce.easeOut(c-a,0,b,c)+d},easeOut:function(a,d,b,c){return(a/=c)<1/2.75?7.5625*b*a*a+d:a<2/2.75?b*(7.5625*(a-=1.5/2.75)*a+.75)+d:a<2.5/2.75?b*(7.5625*(a-=2.25/2.75)*a+.9375)+d:b*(7.5625*(a-=2.625/2.75)*a+.984375)+d},easeInOut:function(a,d,b,c){return a<c/2?.5*LEasing.Bounce.easeIn(2*a,0,
b,c)+d:.5*LEasing.Bounce.easeOut(2*a-c,0,b,c)+.5*b+d}}},Quad=LEasing.Quad,Cubic=LEasing.Cubic,Quart=LEasing.Quart,Quint=LEasing.Quint,Sine=LEasing.Sine,Strong=LEasing.Strong,Expo=LEasing.Expo,Circ=LEasing.Circ,Elastic=LEasing.Elastic,Back=LEasing.Back,Bounce=LEasing.Bounce,LTweenLiteTimeline,LTweenLite=function(){function a(a,b,c){LExtends(this,LObject,[]);this.type="LTweenLiteChild";this.toNew=[];this.init(a,b,c)}function d(){LExtends(this,LObject,[]);this.type="LTweenLite"}var b={init:function(a,
b,c){var k=null;typeof c.tweenTimeline==UNDEFINED&&(c.tweenTimeline=d.TYPE_FRAME);this.target=a;this.duration=b||.001;this.vars=c;this.delay=this.vars.delay||0;this.vars.tweenTimeline==d.TYPE_TIMER?(this.initTime=this.currentTime=(new Date).getTime()/1E3,this.startTime=this.initTime+this.delay):(this.currentTime=0,this.duration*=1E3,this.currentTime-=1E3*this.delay);this.combinedTimeScale=this.vars.timeScale||1;this.active=0==this.duration&&0==this.delay;this.varsto={};this.varsfrom={};this.stop=
!1;"function"!=typeof this.vars.ease&&(this.vars.ease=LEasing.None.easeIn);this.ease=this.vars.ease;delete this.vars.ease;this.vars.onComplete&&(this.onComplete=this.vars.onComplete,delete this.vars.onComplete);this.vars.onUpdate&&(this.onUpdate=this.vars.onUpdate,delete this.vars.onUpdate);this.vars.onStart&&(this.onStart=this.vars.onStart,delete this.vars.onStart);for(k in this.vars)this.varsto[k]=this.vars[k],this.varsfrom[k]=this.target[k]},pause:function(){this.stop=!0},resume:function(){this.stop=
!1},tween:function(){var a,b=this.vars.tweenTimeline==d.TYPE_TIMER;if(b){var c=(new Date).getTime()/1E3-this.startTime;if(0>c)return}else{if(this.stop)return;this.currentTime+=LGlobal.speed;if(0>this.currentTime)return}for(a in this.varsto)"tweenTimeline"!=a&&(this.target[a]=b?this.ease(c,this.varsfrom[a],this.varsto[a]-this.varsfrom[a],this.duration):this.ease(this.currentTime,this.varsfrom[a],this.varsto[a]-this.varsfrom[a],this.duration));this.onStart&&(this.onStart(this.target),delete this.onStart);
if(b?c>=this.duration:this.currentTime>=this.duration){for(a in this.varsto)this.target[a]=this.varsto[a];this.onComplete&&(this.target.target=this.target,this.target.currentTarget=this,this.onComplete(this.target),delete this.target.currentTarget,delete this.target.target);return!0}if(this.onUpdate)this.onUpdate(this.target);return!1},to:function(a,b,c){this.toNew.push({target:a,duration:b,vars:c});return this},keep:function(){var a,b,c;if(0<this.toNew.length){a=this.toNew.shift();a.vars.loop&&(this.loop=
!0);if(this.loop){b={};for(c in a.vars)b[c]=a.vars[c];this.to(a.target,a.duration,b)}this.init(a.target,a.duration,a.vars);return!0}return!1}},c;for(c in b)a.prototype[c]=b[c];d.TYPE_FRAME="type_frame";d.TYPE_TIMER="type_timer";b={tweens:[],ll_show:null,frame:function(){var a,b=this.tweens.length,c;for(a=0;a<b;a++)(c=this.tweens[a])&&c.tween&&c.tween()&&(this.tweens.splice(a,1),a--,b=this.tweens.length,c.keep()&&this.add(c));0==this.tweens.length&&(this.ll_show=null)},to:function(b,c,d){if(b){var k=
new a({},0,{});this.tweens.push(k);this.ll_show=this.frame;k.to(b,c,d);return k}},add:function(a){this.tweens.push(a)},remove:function(a){if(typeof a!=UNDEFINED)for(i=0,l=this.tweens.length;i<l;i++)if(a.objectIndex==this.tweens[i].objectIndex){this.tweens.splice(i,1);break}},removeAll:function(){this.tweens.splice(0,this.tweens.length)}};for(c in b)d.prototype[c]=b[c];LTweenLiteTimeline=new d;LGlobal.childList.push(LTweenLiteTimeline);b=new d;b.TYPE_FRAME=d.TYPE_FRAME;b.TYPE_TIMER=d.TYPE_TIMER;LGlobal.childList.push(b);
return b}(),LAjax=function(){function a(){this.responseType=null}a.prototype={TEXT:"text",ARRAY_BUFFER:"arraybuffer",BLOB:"blob",get:function(a,b,c,f){this.getRequest("GET",a,b,c,f)},post:function(a,b,c,f){this.getRequest("POST",a,b,c,f)},getRequest:function(a,b,c,f,e){var m=this,k,g="",h="";m.err=e;var n=m.getHttp();if(n){if(c)for(k in c)g+=h+k+"="+c[k],h="&";"get"==a.toLowerCase()&&0<g.length&&(b+=(0<=b.indexOf("?")?"&":"?")+g,g=null);n.open(a,b,!0);m.responseType&&(n.responseType=m.responseType,
m.responseType=m.TEXT);n.setRequestHeader("Content-Type","application/x-www-form-urlencoded");n.onreadystatechange=function(){4==n.readyState&&(200<=n.status&&300>n.status||304===n.status?f&&(n.responseType==m.ARRAY_BUFFER||n.responseType==m.BLOB?f(n.response):0<n.responseText.length?f(n.responseText):f(null)):e&&e(n))};n.send(g)}},getHttp:function(){if(typeof XMLHttpRequest!=UNDEFINED)return new XMLHttpRequest;try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(a){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(b){this.err||
this.err(b)}}return!1}};return new a}(),LStageWebView=function(){function a(){LExtends(this,LEventDispatcher,[]);this.display=document.createElement("div");this.iframe=document.createElement("iframe");this.display.style.position="absolute";this.display.style.marginTop="0px";this.display.style.marginLeft="0px";this.display.style.zIndex=11;this.display.appendChild(this.iframe);this.idAdded=!1}var d={loadURL:function(a){var b=this;b.iframe.src=a;b.iframe.onload=function(){b.dispatchEvent(LEvent.COMPLETE)}},
show:function(){this.idAdded||(LGlobal.object.appendChild(this.display),this.idAdded=!0);"none"==this.display.style.display&&(this.display.style.display="")},die:function(){LGlobal.object.removeChild(this.display);this.idAdded=!1},hide:function(){this.display.style.display="none"},setViewPort:function(a){var b=parseInt(LGlobal.canvasObj.style.width)/LGlobal.canvasObj.width,d=parseInt(LGlobal.canvasObj.style.height)/LGlobal.canvasObj.height;this.display.style.marginTop=parseInt(LGlobal.canvasObj.style.marginTop)+
(a.y*d>>>0)+"px";this.display.style.marginLeft=parseInt(LGlobal.canvasObj.style.marginLeft)+(a.x*b>>>0)+"px";this.iframe.style.width=this.display.style.width=(a.width*b>>>0)+"px";this.iframe.style.height=this.display.style.height=(a.height*d>>>0)+"px"}},b;for(b in d)a.prototype[b]=d[b];return a}(),FPS=function(){function a(){LExtends(this,LSprite,[]);this.fps=new LTextField;this.fpsCount=0;this.fpsTime=(new Date).getTime();this.fps.color="#ffffff";this.addChild(this.fps);this.addEventListener(LEvent.ENTER_FRAME,
this.showFPS)}a.prototype.showFPS=function(a){a.fpsCount++;var b=(new Date).getTime();1E3>b-a.fpsTime||(a.fps.text=Math.round(1E4*a.fpsCount/(b-a.fpsTime))/10,a.fpsTime=b,a.fpsCount=0,a.graphics.clear(),a.graphics.drawRect(0,"#000000",[0,0,a.fps.getWidth(),20],!0,"#000000"))};return a}();
function LoadingSample4(a,d,b){base(this,LSprite,[]);this.backgroundColor=null==d?"#000000":d;this.graphics.drawRect(1,this.backgroundColor,[0,0,LGlobal.width,LGlobal.height],!0,this.backgroundColor);null==b&&(b="#FFFFFF");this.arc=new LSprite;this.arc.x=.5*LGlobal.width;this.arc.y=.5*LGlobal.height;this.addChild(this.arc);for(a=0;360>a;a++)this.arc.graphics.drawArc(1+a/36,b,[0,0,50,2*Math.PI/360*a,2*Math.PI/360*(a+2)]);this.progress=0;this.label=new LTextField;this.label.color=b;this.label.weight=
"bolder";this.label.size=18;this.label.x=.5*LGlobal.width;this.label.y=.5*LGlobal.height-.5*this.label.getHeight();this.addChild(this.label);b=new LDropShadowFilter(0,0,"#FFFFFF",30);this.arc.filters=[b];this.addEventListener(LEvent.ENTER_FRAME,this.onframe);this.setProgress(this.progress)}LoadingSample4.prototype.onframe=function(a){a.target.arc.rotate+=20};LoadingSample4.prototype.setProgress=function(a){100<a&&(a=100);this.progress=a;this.label.text=a+"%";this.label.x=.5*LGlobal.width-.5*this.label.getWidth()};